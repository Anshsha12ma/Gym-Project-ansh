var ezVideoAdConductor;(()=>{"use strict";var t={d:(e,s)=>{for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function a(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var i=a.call(t,e||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}function i(t,e,s){return(e=a(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}t.r(e),t.d(e,{getVideoAdConductor:()=>L});const r="ad-start",l="ad-noFill",n="ad-allAdsCompleted",o="ad-ready",h="ad-pause",d="ad-resume",c="playing",u="ended",y="pause",P="videoOnScreen",m="floatingPlayerEnabled",g="floatingPlayerClosed";function f(t,e,s){p(t,e),e.set(t,s)}function p(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(t,e,s){return t.set(k(t,e),s),s}function A(t,e){return t.get(k(t,e))}function k(t,e,s){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:s;throw new TypeError("Private element is not present on this object")}var b=new WeakMap,F=new WeakMap,w=new WeakSet;function C(){const t=this.getAllPlayers().find((t=>k(w,this,R).call(this,t)));if(t)return D("checking for ads... found ad in progress",t.player_id),void this.getAllPlayers().filter((e=>e!==t)).forEach((t=>{t.isAdInProgress()&&!t.isAdPaused()&&(D("Pausing concurrent ad in player",t.player_id),t.adRenderer.pauseAd())}));if(this.startingAd)return void D("Already starting an ad, waiting...");const e=k(w,this,j).call(this);if(e){this.startingAd=!0;try{k(w,this,O).call(this,e)}finally{this.startingAd=!1}}else if(k(w,this,M).call(this)){this.startingAd=!0;try{k(w,this,T).call(this)}finally{this.startingAd=!1}}else if(k(w,this,_).call(this)){this.startingAd=!0;try{k(w,this,S).call(this)}finally{this.startingAd=!1}}else D("checking for ads... no ads ready")}function v(){this.clickToPlayInstreamPlayers.some((t=>t&&!t.isAdInProgress()&&!t.paused()))||(!A(b,this)||this.autoPlayInstreamPlayer.isCurrentlyFloating()||!this.autoPlayInstreamPlayer.is_floating||this.isFloatingPlayerClosed()||k(w,this,R).call(this,this.outstreamPlayer)||this.autoPlayInstreamPlayer.showFloatingPlayer(),this.autoPlayInstreamPlayer&&!this.autoPlayInstreamPlayer.isAdInProgress()&&this.autoPlayInstreamPlayer.paused()&&k(w,this,B).call(this)&&(this.autoPlayInstreamPlayer.play(),k(w,this,U).call(this,this.autoPlayInstreamPlayer,"playing")))}function R(t){return t&&t.isAdInProgress()&&!t.isAdPaused()&&this.impressionIds.has(t.adRenderer.getCurrentImpressionId())}async function S(){k(w,this,U).call(this,this.outstreamPlayer,"starting"),this.outstreamPlayer.showFloatingPlayer(),this.impressionIds.add(this.outstreamPlayer.adRenderer.getCurrentImpressionId()),this.outstreamPlayer.adRenderer.resumeAd(),this.autoPlayInstreamPlayer?.isCurrentlyFloating()&&this.autoPlayInstreamPlayer.hideFloatingPlayer()}function T(){k(w,this,U).call(this,this.autoPlayInstreamPlayer,"starting"),this.getAllPlayers().forEach((t=>{t!==this.autoPlayInstreamPlayer&&t.isAdInProgress()&&!t.isAdPaused()&&t.adRenderer.pauseAd()})),k(w,this,v).call(this),this.impressionIds.add(this.autoPlayInstreamPlayer.adRenderer.getCurrentImpressionId()),this.autoPlayInstreamPlayer.adRenderer.resumeAd()}function O(t){k(w,this,U).call(this,t,"starting"),this.getAllPlayers().forEach((e=>{e!==t&&e.isAdInProgress()&&!e.isAdPaused()&&e.adRenderer.pauseAd()})),this.impressionIds.add(t.adRenderer.getCurrentImpressionId()),t.adRenderer.resumeAd()}function _(){return this.outstreamPlayer?.adRenderer?.isAdReadyToStart()&&this.outstreamPlayer.isAdInProgress()&&this.outstreamPlayer.isAdPaused()&&!this.outstreamPlayer.isPausedByUser()&&!this.isFloatingPlayerClosed()}function M(){return this.autoPlayInstreamPlayer?.adRenderer?.isAdReadyToStart()&&this.autoPlayInstreamPlayer.isAdInProgress()&&this.autoPlayInstreamPlayer.isAdPaused()&&k(w,this,B).call(this)}function j(){return this.clickToPlayInstreamPlayers.find((t=>t?.adRenderer?.isAdReadyToStart()&&t.isAdInProgress()&&t.isAdPaused()&&k(w,this,E).call(this,t)))}function E(t){return!t.isPausedByUser()&&t.getPlayerViewable()}function B(){return!this.autoPlayInstreamPlayer.isPausedByUser()&&(A(b,this)&&!this.isFloatingPlayerClosed()||this.autoPlayInstreamPlayer.getPlayerViewable())}function V(t){this.autoPlayInstreamPlayer=t,t.on(r,(()=>{k(w,this,U).call(this,t,"ad started"),k(w,this,B).call(this)||this.autoPlayInstreamPlayer.adRenderer.pauseAd()})),t.on(l,((e,s)=>{k(w,this,U).call(this,t,"ad no fill"),this.impressionIds.delete(s),this.check()})),t.on(n,((e,s)=>{k(w,this,U).call(this,t,"ad complete"),this.impressionIds.delete(s),this.check()})),t.on(o,(()=>{k(w,this,U).call(this,t,"ad ready"),this.check()})),t.on(h,(()=>{k(w,this,U).call(this,t,"ad paused"),this.check()})),t.on(d,(()=>{k(w,this,U).call(this,t,"ad resumed"),this.check()})),t.on(P,(()=>{k(w,this,U).call(this,t,"player on screen"),this.check()})),t.on(m,(()=>{A(b,this)||(k(w,this,U).call(this,t,"float enabled"),I(b,this,!0)),this.check()})),t.on(g,(()=>{I(F,this,!0),I(b,this,!1);const e=t.adRenderer?.getCurrentImpressionId();e&&this.impressionIds.delete(e),this.check()}))}function z(t){this.clickToPlayInstreamPlayers.push(t),t.on(c,(()=>{this.getAllPlayers().filter((e=>e!==t)).forEach((t=>t.pauseVideoOrAd()))})),t.on(u,(()=>this.check())),t.on(y,(()=>this.check())),t.on(r,(()=>{k(w,this,U).call(this,t,"ad started"),k(w,this,E).call(this,t)||t.adRenderer.pauseAd()})),t.on(l,((e,s)=>{k(w,this,U).call(this,t,"ad no fill"),this.impressionIds.delete(s),this.check()})),t.on(n,((e,s)=>{k(w,this,U).call(this,t,"ad complete"),this.impressionIds.delete(s),this.check()})),t.on(o,(()=>{k(w,this,U).call(this,t,"ad ready"),this.check()})),t.on(h,(()=>{k(w,this,U).call(this,t,"ad paused"),this.check()})),t.on(d,(()=>{k(w,this,U).call(this,t,"ad resumed"),this.check()})),t.on(P,(()=>{k(w,this,U).call(this,t,"player on screen"),this.check()}))}function U(t){if("1"===new URLSearchParams(window.location.search).get("ez_conductor_debug")){const i=t.adRenderer?.getCurrentImpressionId();for(var e=arguments.length,s=new Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];i&&s.unshift(i);const r=t===this.autoPlayInstreamPlayer?"#FF9770":t===this.outstreamPlayer?"#79ADDC":"#B3F5BC";console.log(`%c[conductor] %c[${t.player_id}]`,"color: #FFD700",`color: ${r}`,...s)}}function D(t){"1"===new URLSearchParams(window.location.search).get("ez_conductor_debug")&&console.log("%c[conductor]","color: #FFD700",...Array.from(arguments))}const W=new class{constructor(){var t,e;p(t=this,e=w),e.add(t),i(this,"outstreamPlayer",void 0),i(this,"autoPlayInstreamPlayer",void 0),i(this,"clickToPlayInstreamPlayers",[]),i(this,"impressionIds",new Set),f(this,b,!1),f(this,F,!1),i(this,"isChecking",!1),i(this,"startingAd",!1)}check(){if(!this.isChecking){this.isChecking=!0;try{k(w,this,C).call(this),k(w,this,v).call(this)}finally{this.isChecking=!1}}}isFloatingPlayerClosed(){return A(F,this)}getAllPlayers(){return[this.autoPlayInstreamPlayer,...this.clickToPlayInstreamPlayers,this.outstreamPlayer].filter((t=>t))}getOutstreamPlayer(){return this.outstreamPlayer}getPlayerById(t){return this.getAllPlayers().find((e=>e?.player_id===t))}applyVideoMagic(t,e){e.IsFloating&&window.__ezOutstream?(D("Found autoPlay magic player",e),k(w,this,V).call(this,t)):0===e.MagicPlaceholderType&&e.IsAutoPlay?(D("Found autoPlay non-magic player",e),k(w,this,V).call(this,t)):1===e.MagicPlaceholderType?(D("Found non-floating autoPlay player",e),k(w,this,V).call(this,t)):2===e.MagicPlaceholderType?(D("Found click to play magic player",e),k(w,this,z).call(this,t)):(D("Found something else",e),k(w,this,z).call(this,t))}setOutstreamPlayer(t){D("Found outstream player",t),this.outstreamPlayer=t,t.on(r,(()=>{k(w,this,U).call(this,t,"ad started"),this.autoPlayInstreamPlayer?.isCurrentlyFloating()&&this.autoPlayInstreamPlayer.hideFloatingPlayer()})),t.on(l,((e,s)=>{k(w,this,U).call(this,t,"ad no fill"),this.impressionIds.delete(s),t.hideFloatingPlayer(),this.check()})),t.on(n,((e,s)=>{k(w,this,U).call(this,t,"ad complete"),this.impressionIds.delete(s),t.hideFloatingPlayer(),this.check()})),t.on(o,(()=>{k(w,this,U).call(this,t,"ad ready"),this.check()})),t.on(h,(()=>{t.isPausedByUser()||t.hideFloatingPlayer(),this.check()})),t.on(d,(()=>{this.outstreamPlayer.showFloatingPlayer(),this.check()})),t.on(g,(()=>{I(F,this,!0),I(b,this,!1);const e=t.adRenderer?.getCurrentImpressionId();e&&this.impressionIds.delete(e),this.check()}))}startOutstreamInsteadOfInstream(t){D("startOutstreamInsteadOfInstream"),this.outstreamPlayer?.adRenderer?.handleSwitchToOutstream(t),k(w,this,_).call(this)&&k(w,this,S).call(this)}cleanupForMultiAuction(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const e=[...this.clickToPlayInstreamPlayers];"instream"!==t&&e.push(this.autoPlayInstreamPlayer),"outstream"!==t&&e.push(this.outstreamPlayer),e.forEach((t=>t?.adRenderer?.cleanupForMultiAuction()))}};function L(){return W}ezVideoAdConductor=e})();