var ezVideoAnalytics;(()=>{"use strict";var e={d:(t,i)=>{for(var a in i)e.o(i,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:i[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function s(e,t,i){return(t=a(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),a=0;a<i.length;a++){for(var s=i[a];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}function r(){var e={};return"undefined"!==typeof videoID&&(e.content_id=videoID),"undefined"!==typeof title&&(e.video_title=title),e.uuid=function(){var e=(new Date).getTime();return e+=performance.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)}))}(),e.total_play_time=0,e.play_cnt=0,e.pause_cnt=0,e.ad_cnt=0,e.seek_time=0,e.completed=!1,e.errored=!1,e.removed=!1,e.muted=!1,e.seek_back_click=0,e.seek_forward_click=-1,e.seek_back_scrubbing=0,e.seek_forward_scrubbing=0,e.timeupdatecalls=0,e}function n(e){if(!e||0===Object.keys(e).length)return!1;if("undefined"!==typeof _ezaq&&_ezaq.domain_id){const t=_ezaq.domain_id;if(e.DomainIdOwner&&e.DomainIdOwner!==t)return!0}return!1}function o(){return"undefined"!==typeof _ezaq&&"undefined"!==typeof _ezaq.form_factor_id?2==_ezaq.form_factor_id||3==_ezaq.form_factor_id:"undefined"!==typeof ezoFormfactor&&("2"==ezoFormfactor||"3"==ezoFormfactor)}function l(){if(function(){const e=new URLSearchParams(window.location.search).get("ez_vid_debug");return"1"===e||"2"===e}()){let e=Array.from(arguments);e.unshift("[Video Ads]"),console.log.apply(console,e)}}function h(e){let t=[],i=e;for(;null!==i;)t.push(i.toString()),i="innerError"in i?i.innerError():null;return t.join("; inner error: ").substring(0,256)}function u(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?window.__ezOutstream:window.__ezInstream;if("undefined"===typeof e||"undefined"===typeof e.monetizationApproval)return!1;return e.monetizationApproval.MCMApproved}function c(){return(new Date).toLocaleString("sv",{timeZone:"America/Chicago"})}function g(e){let t="";if(e.getAd&&"function"===typeof e.getAd){let i=e.getAd(),a=i.getWrapperAdSystems(),s=i.getWrapperAdIds(),d=a.findIndex((e=>"Ezoic"===e));d>=0&&s.length>d?(t=s[d],l("winning ad id: "+t)):"function"===typeof i.getAdId&&(t=i.getAdId())}return t}e.r(t),e.d(t,{NewAnalyticsPlayer:()=>Se,NewPrebidVideoAdInitializer:()=>Te,NewVideoAdInitializer:()=>Ie});class v{constructor(e,t,i,a){s(this,"promise",void 0),s(this,"resolve",void 0),l("VideoAdInitializer constructor called"),this.promise=new Promise((e=>this.resolve=e)),this.videoPlayer_=e,google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(i),google.ima.settings.setNumRedirects(8),this.videoAdContainerId="ez-video-ad-container-"+t.PlayerId;let d=document.getElementById(this.videoAdContainerId);if(d)if(google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.adDisplayContainer_=new google.ima.AdDisplayContainer(d,this.videoPlayer_.getVideoElement()),this.adsLoader_=new google.ima.AdsLoader(this.adDisplayContainer_),t.IsAutoPlay&&(a?.autoplay_allowed||a?.autoplay_allowed_muted))this.initializeContainer();else{const e=/iPhone|iPad|Android/i.test(navigator.userAgent)?"touchend":"click";this.videoPlayer_.getVideoContainer().addEventListener(e,(()=>this.initializeContainer()),{once:!0}),l("Waiting for user input to initialize ad display container")}else l("Ad container missing or deleted, not loading ads")}getAdsLoader(){return this.adsLoader_}initializeContainer(){this.adDisplayContainer_.initialize(),this.resolve()}initializedPromise(){return this.promise}}const p="ad-start",_="ad-noFill",m="ad-allAdsCompleted",y="ad-ready",f="ad-pause",A="ad-resume",w="ad-adError",P="floatingPlayerClosed",b="floatingPlayerShow",D="floatingPlayerHide",E=1;new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});function k(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)}function z(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||k()||navigator.userAgent.match(/Opera Mini/i)||navigator.userAgent.match(/IEMobile/i)}const C="450px",B=["div","span","p","article","section","aside","main","ul","ol","h1","h2","h3","h4","h5","h6","table"],x=["header","footer","li","form","nav","script","code","pre","picture","figure","video"],S=["ez-CCPA"],I=["header","navbar","top-bar","site-header","main-navigation","footer","site-footer","bottom-bar","footer-nav","footer-widgets","menu","nav-menu","main-menu","dropdown-menu","side-menu"],T=["footer",".footer-nav",".footer-widgets",".site-footer",".footer"];async function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=document.createElement("span");function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;!function(){if(window.EzoicMagicPlayerExclusionSelectors)for(var e=0;e<window.EzoicMagicPlayerExclusionSelectors.length;e++)try{for(var t=document.querySelectorAll(window.EzoicMagicPlayerExclusionSelectors[e]),i=0;i<t.length;i++)t[i].setAttribute("data-ezoic-video-excluded","1")}catch(s){O("magic: Invalid selector:",window.EzoicMagicPlayerExclusionSelectors[e],"; Error:",s)}try{t=document.querySelectorAll('[id^="ezoic-pub-ad-placeholder-"], .ezoic-ad.adtester-container');var a=Array.from(t).filter((e=>!e.hasAttribute("data-ezhumixplayerlocation")));for(e=0;e<a.length;e++)a[e].setAttribute("data-ezoic-video-excluded","1")}catch(s){O("magic: Invalid selector when excluding ezoic ads spans, Error:",s)}try{for(t=document.querySelectorAll("[data-ez-ph-id]"),e=0;e<t.length;e++)t[e].setAttribute("data-ezoic-video-excluded","1")}catch(s){O("magic: Invalid selector when excluding ezoic ads elements, Error:",s)}}(),function(){if(window.EzoicMagicPlayerInclusionSelectors)for(var e=0;e<window.EzoicMagicPlayerInclusionSelectors.length;e++)try{for(var t=document.querySelectorAll(window.EzoicMagicPlayerInclusionSelectors[e]),i=0;i<t.length;i++)t[i].setAttribute("data-ezoic-video-included","1")}catch(a){O("magic: Invalid selector:",window.EzoicMagicPlayerInclusionSelectors[e],"; Error:",a)}(t=document.querySelectorAll("[data-ezhumixplayerlocation]")).forEach((e=>{e.setAttribute("data-ezoic-video-included","1")}))}();var t=null,i=9999999999;let a=400;z()&&(a=400);var s=document.querySelectorAll(".ez-video-placeholder-marker, [data-ezhumixplayerlocation]"),d=e||window.EzoicPreferredLocation||1;O("magic: preferredViewports",d=function(e){if("URLSearchParams"in window){return new URLSearchParams(window.location.search).get(e)||null}return null}("ez_magic_viewports")||d);var n=window.innerHeight*d,o=Math.max(document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.body.scrollHeight);n>o&&(O("magic: the document is too short for the preferred height, placing at the end of the document"),n=o-200),O("magic: preferredHeight",n,"window.innerHeight",window.innerHeight,"pageHeight",o,"preferredViewports",d);var l=n-.5*a;let h=function(){let e=document.querySelectorAll('meta[name="robots"]'),t=!1;for(let d=0;d<e.length;d++){let i=e[d].getAttribute("content");if(i&&i.includes("max-image-preview:large")){t=!0;break}}if(!t)return O("does not have large image preview setting enabled"),null;const i=[".entry-header img",".td-post-featured-image img",".article__gallery img","img.wp-post-image",".article__cover img",".gallery__image_picture img",".et_pb_title_featured_container img",".featured-image img","img.featured",".post-thumbnail img",".post-header img",".cover-image img",".hero img",".banner img",".post > img:only-child",".article > img:only-child",".main > img:only-child","header img","figure.wp-block-image img","figure.wp-block-cover img",'img[data-featured="true"]','img[rel="featured"]'],a=2*window.innerHeight;let s=[];if(i.forEach((e=>{const t=document.querySelectorAll(e);s=s.concat(Array.from(t))})),s=[...new Set(s)],0===s.length)return O("no images found in the query"),null;if(s=s.filter((e=>{const t=e.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop||0,s=t.top+i;if(s>a)return O("filtered out img: ",e,` imageTopPosition: ${s}, positionThreshold: ${a}`),!1;const d=e.naturalWidth/e.naturalHeight;return t.width>200&&t.height>180&&d>.5&&!e.classList.contains("avatar")&&!e.classList.contains("icon")&&!e.closest(".thumbnails, .sidebar, .footer")})),0===s.length)return console.log("no suitable images after filtering"),null;return s.sort(((e,t)=>{const i=e.getBoundingClientRect(),a=t.getBoundingClientRect();return i.top+i.left-(a.top+a.left)})),s[0]}();if(h){let e=h.getBoundingClientRect(),t=Math.max(l,e.bottom+window.scrollY),i=Math.round(t-l),a=Math.round(l);window._ezaq&&window.__ez&&window.__ez.bit&&__ez.bit.Add(_ezaq.page_view_id,[new __ezDotData("delta_target_hmx_feat_img",i),new __ezDotData("old_target_hmx_feat_img",a)]),O("featured image identified was",h,`old target position: ${l}. new: ${t}`),l=t}else O("no featured image on the page",h);var u=n+a*(1+d),[t,i]=r(s,t,i,l);if(!t||i>u)var[t,i]=r(document.querySelectorAll("body *"),t,i,l);else O("magic: Found publisher placeholder that is good enough");return O("magic: found location. Will be placed at: element",t,"which has top position of:",i,"and needs to be below:",l),t}function s(e,t){let i=t.querySelectorAll("*").length,a=d(t,i,[]);if(0==a.length)return e;for(var s=[],r=0;r<a.length;r++){for(var n=!1,o=0;o<a.length;o++)if(r!=o&&a[r].contains(a[o])){n=!0;break}n||s.push(a[r])}var l=null;for(r=0;r<s.length;r++){var h=s[r].getBoundingClientRect();h.width>e&&(e=h.width,l=s[r])}return O("magic: content width is",e,l),e}function d(e,t,i){var a=e.querySelectorAll("*"),s=e.children,r=e.getBoundingClientRect();if(a.length>.33*t&&r.top<500&&!g(e)&&!c(e)){i.push(e);for(var n=0;n<s.length;n++)d(s[n],t,i)}return i}function r(e,t,i,a){let d=.4,r=450,v=400;z()&&(d=.7,r=384,v=250);const p=window.innerWidth;var _=s(0,document.body);O("magic: content width is ",_,"viewportWidth is ",p,"thresholdWidthMinPixels is ",v),_<v&&(O("magic: content width changed to viewport width"),_=p),O("getting min threshold width: ",d*p,r,.66*_);var m=Math.min(d*p,r,.66*_);m<v&&(m=v),O("magic: Finding element below fold with width! (pizza) >= "+m+"px and fold position >= "+a+"px");let y=1/0,f=null;if(window.__ez&&window.__ez.tf&&window.__ez.tf.vidAbvFoot){document.querySelectorAll(T.join(",")).forEach((e=>{let t=e.getBoundingClientRect();t.top<y&&(f=e,y=t.top)})),O(`magic: footer is ${f} with top ${y}. player must be above it.`)}for(const s of e){const e=s.getBoundingClientRect();(s.hasAttribute("data-ezhumixplayerlocation")||s.classList.contains("ez-video-placeholder-marker"))&&(e.width=m);let d=e.top<y;e.top>=a&&e.width>=m&&e.top<i&&u(s)&&!g(s)&&!h(s)&&!l(s)&&!c(s)&&n(s,a)&&!o(s)&&d&&(i=e.top,t=s)}return[t,i]}function n(e,t){for(const i of e.children){const e=i.getBoundingClientRect();if(!(0==e.width||0==e.height)&&e.top<t-100)return O("magic: dissalowed because child top: "+e.top+" < targetPosition-100: "+t),!1}return!0}function o(e){for(;e;){const t=window.getComputedStyle(e);if(parseInt(t.height)>450)return!1;if("none"!==t.backgroundImage)return!0;e=e.parentElement}return!1}function l(e){var t=e.getBoundingClientRect(),i=e.previousElementSibling;if(i){var a=i.getBoundingClientRect();if(t.top<a.bottom-30)return O("magic: dissalowed because element is overlapping: "+e),!0}return!1}function h(e){if(e.hasAttribute("data-ezoic-video-included")||e.classList.contains("ez-video-placeholder-marker"))return!1;let t=!window.EzoicMagicPlayerInclusionSelectors||0===window.EzoicMagicPlayerInclusionSelectors.length;for(;e;){if(S.includes(e.id))return!0;if(!e.hasAttribute("data-ezoic-video-included")&&x.includes(e.tagName.toLowerCase())||e.hasAttribute("data-ezoic-video-excluded"))return!0;t=t||e.hasAttribute("data-ezoic-video-included");for(var i=0;i<I.length;i++)if(e.classList.contains(I[i]))return O("magic: dissalowed because element has disallowed class: "+e),!0;e=e.parentElement}return!t}function u(e){return!!B.includes(e.tagName.toLowerCase())}function c(e){for(;e;){var t=window.getComputedStyle(e);if(("fixed"===t.position||"sticky"===t.position||"absolute"===t.position)&&!e.hasAttribute("data-ezoic-video-included"))return O("magic: dissalowed because element is floating: "+e+" classes: "+e.classList),!0;e=e.parentElement}return!1}function g(e){var t=!(e.offsetWidth||e.offsetHeight||e.getClientRects().length);return t&&O("magic: dissalowed because element is invisible: "+e),t}function v(){const s=a(t);if(s&&s.parentNode){var d=!1;let t=window.getComputedStyle(s.parentNode),a=window.getComputedStyle(s);"grid"===t.display&&(d=!0,i.style="grid-column: 1/-1;"),(d=d||"grid"===t.display||"flex"===t.display)&&(O(`setting the order of the player's insert span to ${a.order}`),i.style.order=a.order),e instanceof Node?i.appendChild(e):i.innerHTML=e,s.parentNode.insertBefore(i,s);let r=function(e){if(!(e instanceof Element))throw new Error("Invalid input: not a DOM element");let t=e;for(;t.parentElement;){const i=t.parentElement;if(i.clientHeight<e.clientHeight){if("0px"!=window.getComputedStyle(i).height)return i}t=i}return null}(i);if(null!=r){if("0px"!=window.getComputedStyle(r).height){const e=5;O("magic: setting min height for ancestor element so that player doesn't overflow:",r),r.style.minHeight=e+r.scrollHeight+"px",M()&&(r.dataset.hmxplayer="added override to min height so that that the player won't overflow")}}return function(e){if(!e.hasAttribute("data-ezhumixplayerlocation"))return;for(;e.firstChild;)e.removeChild(e.firstChild);const t=e.id.match(/\d+$/)[0];document.querySelectorAll(`[data-ez-ph-id="${t}"]`).forEach((e=>{e.remove()}))}(s),function(e){if(!e.hasAttribute("data-ezhumixplayerlocation"))return;const t=e.parentElement;t.classList.contains("adslot")&&(t.classList.remove("adslot"),t.removeAttribute("id"))}(s),O("magic: Magic JS inserter placed magic player below fold",s),s.offsetWidth?parseInt(s.offsetWidth):parseInt(C)}if(!window.EzoicMagicPlayerInclusionSelectors||0===window.EzoicMagicPlayerInclusionSelectors.length){let t=!1;for(let e=0;e<T.length;e++){if(document.body.querySelector(T)){t=!0;break}}var r=window.EzoicPreferredLocation||1;if(!t&&1==r){let t=400;return z()&&(t=400),window.innerHeight-.5*t<Math.max(document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.body.scrollHeight)&&(e instanceof Node?i.appendChild(e):i.innerHTML=e,O("magic: inserting to the end of the body, since there are no other good candidates"),document.body.appendChild(i)),document.body.offsetWidth?parseInt(document.body.offsetWidth):parseInt(C)}return O("magic: Magic JS inserter couldn't find a good element to insert into"),!1}}i.className="humix-universal-js-insert",i.style="display: block;padding:30px 0px;text-align:center;margin:0 auto;max-width:calc(min(768px, 100%))";let p=!1;var _;return p=v(),p||(await(_=300,new Promise((e=>setTimeout(e,_)))),O("magic: trying to place below fold again"),p=v()),p}async function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;for(var i=document.querySelectorAll('[id^="humix-vid-"]'),a=0;a<i.length;a++)for(var s=i[a].querySelectorAll("script"),d=0;d<s.length;d++)if(s[d].src.includes("humix.com"))return O("magic: found humix embed, not inserting magic player"),!1;O("Attempting to insert magic player",document.readyState);var r=await L(e,t);if(!!!r){let t=function(){let e=Array.from(document.querySelectorAll("span, div")).filter((e=>{const t=e.classList,i=e.id;return!(t.contains("under_page_title")||t.contains("top_of_page")||t.contains("sidebar")||t.contains("bottom_floating"))&&(t.contains("ezoic-autoinsert-video")||i.startsWith("ezoic-pub-video-placeholder-"))&&(!e.nextElementSibling||!e.nextElementSibling.id.startsWith("ez-video-wrap-"))}));return e.sort(((e,t)=>e.getBoundingClientRect().top-t.getBoundingClientRect().top)),e}();if(0==t.length)return O("No valid video nodes found for magic player, not inserting"),!1;O("Default inserting magic player into",t[0]),t[0].insertAdjacentHTML("afterend",e)}let n=parseInt(C);return n>r&&z()&&(n=r),Array.prototype.slice.call(document.querySelectorAll(".humix-universal-js-insert > .ez-video-wrap > .ez-video-center")).forEach((function(e){e.classList.contains("ez-playlist-vertical")||(e.style.maxWidth=n+"px")})),!0}function M(){return"1"===new URLSearchParams(window.location.search).get("ez_vid_autoinsert_debug")}function O(){if(M()){let e=Array.from(arguments);e.unshift("[Video Player]"),console.log.apply(console,e)}}window.hasEzChromeExtListener||(window.addEventListener("message",(e=>{if(e.origin!==window.location.origin)return;const t=e.data;"insertHTMLBelowFold"===t.action&&V(t.html,t.viewport)})),window.hasEzChromeExtListener=!0);const R=new EventTarget,U=new MutationObserver((e=>{const t=e.map((e=>e.target)).find((e=>"ins"===e.tagName?.toLowerCase()&&e.hasAttribute("data-anchor-status")));t&&(U.disconnect(),F(),new MutationObserver(F).observe(t,{attributes:!0,attributeFilter:["style"]}))}));function F(){R.dispatchEvent(new CustomEvent("anchor-update"))}function H(e,t,i){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,i)}function q(e,t){return e.get(j(e,t))}function j(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}U.observe(document,{attributes:!0,attributeFilter:["data-anchor-status"],subtree:!0});var N=new WeakMap;class W{constructor(){var e,t,i;H(this,N,void 0),t=this,i={},(e=N).set(j(e,t),i)}addEventListener(e,t){q(N,this)[e]||(q(N,this)[e]=[]),q(N,this)[e].push(t)}removeEventListener(e,t){q(N,this)[e]&&(q(N,this)[e]=q(N,this)[e].filter((e=>e!==t)))}dispatchEvent(e,t){q(N,this)[e]&&q(N,this)[e].slice().forEach((e=>{e(t)}))}once(e,t){const i=a=>{t(a),this.removeEventListener(e,i)};this.addEventListener(e,i)}}const Q="playPauseClick",G="muteClick",$="fullscreenClick",Y="setVolume";class K extends W{constructor(e){super(),s(this,"player",null),s(this,"currentAd",null),s(this,"adContainerDiv",null),s(this,"controlsDiv",document.createElement("div")),s(this,"countdownDiv",document.createElement("div")),s(this,"seekBarDiv",document.createElement("div")),s(this,"progressDiv",document.createElement("div")),s(this,"playPauseDiv",document.createElement("div")),s(this,"muteDiv",document.createElement("div")),s(this,"sliderDiv",document.createElement("div")),s(this,"sliderLevelDiv",document.createElement("div")),s(this,"fullscreenDiv",document.createElement("div")),s(this,"countdownDiv",document.createElement("div")),s(this,"boundOnMouseUp",this.onMouseUp.bind(this)),s(this,"boundOnMouseMove",this.onMouseMove.bind(this)),this.player=e,this.adContainerDiv=e.getAdContainer(),this.adContainerDiv.className="ez-video-ad-container",this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.top="0px",this.adContainerDiv.style.zIndex=5,this.createUi(),this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1)}createUi(){this.controlsDiv.className="ez-vad-controls",this.controlsDiv.style.width="100%",this.countdownDiv.className="ez-vad-countdown",this.seekBarDiv.className="ez-vad-seek-bar",this.seekBarDiv.style.width="100%",this.progressDiv.className="ez-vad-progress",this.playPauseDiv.classList.add("ez-vad-play-pause","ez-vad-playing"),this.playPauseDiv.addEventListener("click",this.onPlayPauseClick.bind(this),!1),this.muteDiv.classList.add("ez-vad-mute","ez-vad-non-muted"),this.muteDiv.addEventListener("click",this.onMuteClick.bind(this),!1),o()&&(this.muteDiv.style.left="2em"),this.sliderDiv.className="ez-vad-slider",this.sliderDiv.addEventListener("mousedown",this.onVolumeSliderMouseDown.bind(this),!1),o()&&(this.sliderDiv.style.display="none"),this.sliderLevelDiv.className="ez-vad-slider-level",this.fullscreenDiv.classList.add("ez-vad-fullscreen","ez-vad-non-fullscreened"),this.fullscreenDiv.addEventListener("click",this.onFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)}onPlayPauseClick(){this.dispatchEvent(Q)}onMuteClick(){this.dispatchEvent(G)}onFullscreenClick(){this.dispatchEvent($)}onAdsPaused(){this.playPauseDiv.classList.add("ez-vad-paused"),this.playPauseDiv.classList.remove("ez-vad-playing"),this.showAdControls()}onAdsResumed(){this.onAdsPlaying(),this.showAdControls()}onAdsPlaying(){this.playPauseDiv.classList.add("ez-vad-playing"),this.playPauseDiv.classList.remove("ez-vad-paused")}updateAdUi(e,t,i,a,s){const d=Math.floor(t/60);let r=Math.floor(t%60);r.toString().length<2&&(r="0"+r);let n=": ";s>1&&(n=" ("+a+" of "+s+"): "),this.countdownDiv.innerHTML=t>=0?`Advertisement${n}${d}:${r}`:"";const o=100*(e/i);this.progressDiv.style.width=o+"%"}unmute(){this.muteDiv.classList.add("ez-vad-non-muted"),this.muteDiv.classList.remove("ez-vad-muted"),this.sliderLevelDiv.style.width=100*this.player.getPlayerVolume()+"%"}mute(){this.muteDiv.classList.add("ez-vad-muted"),this.muteDiv.classList.remove("ez-vad-non-muted"),this.sliderLevelDiv.style.width="0%"}onVolumeSliderMouseDown(){window.addEventListener("mouseup",this.boundOnMouseUp,!1),window.addEventListener("mousemove",this.boundOnMouseMove,!1)}onMouseMove(e){this.changeVolume(e)}onMouseUp(e){this.changeVolume(e),window.removeEventListener("mouseup",this.boundOnMouseUp),window.removeEventListener("mousemove",this.boundOnMouseMove)}changeVolume(e){let t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth*100;t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==t?(this.muteDiv.classList.add("ez-vad-muted"),this.muteDiv.classList.remove("ez-vad-non-muted")):(this.muteDiv.classList.add("ez-vad-non-muted"),this.muteDiv.classList.remove("ez-vad-muted")),this.dispatchEvent(Y,t/100)}showUi(){this.adContainerDiv.style.display="block"}hideUi(){this.adContainerDiv.style.display="none"}reset(){this.hideUi()}onAdBreakStart(e){this.currentAd=e.getAd(),this.onPlayerVolumeChanged(this.player.getPlayerVolume()),this.showUi(),this.currentAd.isLinear()&&(this.controlsDiv.style.display="block",this.onAdsPlaying(),this.hideAdControls())}onAdBreakEnd(){(null==this.currentAd||this.currentAd.isLinear())&&this.hideUi(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""}onAllAdsCompleted(){this.hideUi()}onLinearAdStart(){this.adContainerDiv.classList.remove("ez-bumpable-ad-container"),this.isAdNonlinear=!1}onNonLinearAdLoad(){this.adContainerDiv.style.display="block",this.adContainerDiv.classList.add("bumpable-ima-ad-container"),this.isAdNonlinear=!0}onPlayerEnterFullscreen(){this.fullscreenDiv.classList.add("ez-vad-fullscreened"),this.fullscreenDiv.classList.remove("ez-vad-non-fullscreened")}onPlayerExitFullscreen(){this.fullscreenDiv.classList.add("ez-vad-non-fullscreened"),this.fullscreenDiv.classList.remove("ez-vad-fullscreened")}onPlayerVolumeChanged(e){0==e?(this.muteDiv.classList.add("ez-vad-muted"),this.muteDiv.classList.remove("ez-vad-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.muteDiv.classList.add("ez-vad-non-muted"),this.muteDiv.classList.remove("ez-vad-muted"),this.sliderLevelDiv.style.width=100*e+"%")}showAdControls(){this.controlsDiv.classList.add("ez-vad-controls-showing")}hideAdControls(){this.controlsDiv.classList.remove("ez-vad-controls-showing")}}function J(){return"undefined"===typeof __ezInstream||!__ezInstream?.dvama||("true"===__ez?.tf?.vamac||"true"===__ez?.tf?.vamacio)}class X{constructor(){s(this,"bestBreak",void 0),s(this,"instreamBreak",void 0)}cleanupMultiAuctionBreak(){let e=!0;return J()&&this.bestBreak&&(this.bestBreak&&(__ez.vhb.biddingComplete(this.bestBreak.getPlayerId()),this.bestBreak=null,e=!1),this.instreamBreak&&(__ez.vhb.biddingComplete(this.instreamBreak.getPlayerId()),this.instreamBreak=null)),e}shouldConsiderSwitchingToOutstream(e){return this.bestBreak?.isOutstream&&!e?.isOutstream}switchToOutstream(e){e&&window.ezVideoAdConductor?.getVideoAdConductor()?.startOutstreamInsteadOfInstream(e)}}const Z="adStarted",ee="adCompleted",te="noMoreAdsAllowed",ie="contentPauseRequested",ae="contentResumeRequested";class se extends W{constructor(e,t,i,a,d,r,n,o){super(),s(this,"videoAdUi",void 0),s(this,"multiAuctionHandler",void 0),l("VideoAdRendering constructor"),this.videoPlayer_=e,this.adUnit=t,this.adsInitializer=i,this.isPlaylist=a,this.autoplayAllowed=r,this.videoObject=d,this.videoAdUi=o,this.videoAdUi.addEventListener(Y,(e=>this.setVolume(e))),this.multiAuctionHandler=new X,this.isAdRequested=!1,this.isMuted=e.getPlayerMute(),this.isPlaying=!1,this.adsLoader_=i.adsLoader_,this.adsLoader_.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(e=>this.onAdsManagerLoaded_(e)),!1),this.adsLoader_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>this.onAdError_(e)),!1),l("ads loader setup. adsLoader_:",this.adsLoader_),this.adTrackingTimer=null,this.adsLoaded=!1,this.numRequests=0,this.currentAdBreak=null,this.videoEndedCallbackEnabled=!1,this.videoPlayer_.on(null,"fullscreenchange",(()=>this.onFullscreenChange())),this.videoPlayer_.registerVideoEndedCallback((()=>this.onVideoEnded())),this.videoPlayer_.player.player.on("playerresize",(()=>this.playerResizeHandler())),this.totalAdsPlaybackDuration=0,this.maxAdDuration=n,this.adPosterURL=function(){const e=document.createElement("canvas");return e.width=1,e.height=1,e.getContext("2d").clearRect(0,0,e.width,e.height),e.toDataURL("image/png")}()}async initialize(){}isOutstream(){return this.currentAdBreak?.isOutstream||"ez-o"===this.getPlayerId()}playerResizeHandler(){var e=this.videoPlayer_.getVideoDimensions();this.resize(e.width,e.height,!1)}requestAds(e){if(this.isAdRequested)l("Ads are already requested!!!");else if(this.videoPlayer_.getVideoElement()){if(!this.getCanShowMoreAds())return l("No more ads allowed to be shown"),this.dispatchEvent(te),void this.handleResetRenderer();l("requestAds to adsLoader"),this.isMuted=this.videoPlayer_.getPlayerMute(),this.isAdRequested=!0,this.currentAdBreak=e,this.doImaAdRequest(e)}}doImaAdRequest(e){this.numRequests++;var t=new google.ima.AdsRequest;if(e.hasOwnProperty("vastXML"))t.adsResponse=e.vastXML;else{if(!e.vastURL)return void l("requestAds aborted: no vast provided");{const i=new URL(e.vastURL);i.searchParams.set("vpmute",this.isMuted?"1":"0");const a=document.cookie.split("; ").find((e=>e.startsWith("ezppid_ck=")))?.split("=")[1]||null;if(a&&i.searchParams.set("ppid",a),window.__ezOutstream?.UseGPTOutstream){const e=new URLSearchParams(i.searchParams.get("cust_params")||"");e.set("eb_br","zero"),i.searchParams.set("cust_params",e.toString())}if(window.__ezDevtools){const e=new URLSearchParams(i.searchParams.get("cust_params")||"");e.set("rid",this.getRequestId()),i.searchParams.set("cust_params",e.toString())}t.adTagUrl=i.toString()}}const i=this.videoPlayer_.getVideoDimensions();t.linearAdSlotWidth=i.width,t.linearAdSlotHeight=i.height,t.nonLinearAdSlotWidth=i.width,t.nonLinearAdSlotHeight=150,t.vastLoadTimeout=7e3,t.pageUrl=window.vectx?.parent_url||window.location.href,t.contentTitle=this.videoObject.VideoTitle,t.contentDuration=this.videoPlayer_.getVideoLength(),t.setAdWillAutoPlay(this.autoplayAllowed),t.setAdWillPlayMuted(this.isMuted),window.__ez?.tf?.varf&&t.setContinuousPlayback(!this.isOutstream()),l("adsLoader",this.adsLoader_,"adsRequest",t),this.adsLoader_.requestAds(t)}isAdPlaying(){return this.isPlaying}pause(){this.adsManager_&&(this.adsManager_.pause(),this.isPlaying=!1,this.videoAdUi.onAdsPaused())}resume(){this.adsManager_&&(this.started()?this.adsManager_.resume():this.adsManager_.start(),this.videoAdUi.onAdsResumed(),this.isPlaying=!0)}isAdMuted(){return this.isMuted}mute(){this.adsManager_&&(this.adsManager_.setVolume(0),this.isMuted=!0,this.videoAdUi.mute())}unmute(){this.adsManager_&&(this.adsManager_.setVolume(1),this.isMuted=!1,this.videoAdUi.unmute())}setVolume(e){this.videoPlayer_.setPlayerVolume(e),this.adsManager_&&this.adsManager_.setVolume(e),this.isMuted=0==e}resize(e,t,i){this.adsManager_&&(i?this.adsManager_.resize(e,t,google.ima.ViewMode.FULLSCREEN):this.adsManager_.resize(e,t,google.ima.ViewMode.NORMAL))}contentEnded(){this.log("contentEnded destroying"),this.destroyAdsManager(),this.videoAdUi.hideUi(),this.adsLoader_.contentComplete(),this.totalAdsPlaybackDuration=0}async onAdsManagerLoaded_(e){this.log("Ads manager loaded event");var t=new google.ima.AdsRenderingSettings;t.useStyledLinearAds=!1,t.useStyledNonLinearAds=!0,t.enablePreloading=!0,t.mimeTypes=["video/mp4","video/ogg"],t.loadVideoTimeout=15e3,this.adsManager_=e.getAdsManager(this.videoPlayer_.getVideoElement(),t),this.adsManager_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(e=>this.onAdError_(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.LOG,(e=>this.onLogEvent_(e)),!1),this.videoObject._adAnalytics=this.videoPlayer_.attachAdAnalytics(this.videoObject.AdUnit,this.adsManager_,this.videoObject,!1),this.adsLoaded=!0,await this.adsInitializer.initializedPromise(),l("Ad display container initialized. Starting ads manager."),this.startAdsManager_(this.adsManager_)}startAdsManager_(e){if(e.isCustomClickTrackingUsed()){document.getElementById("customClick").style.display="table"}this.events=[],e.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(e=>this.onContentPauseRequested_(e)),!1),e.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(e=>this.onContentResumeRequested_(e)),!1);var t=[google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.DURATION_CHANGE];for(var i in t)e.addEventListener(t[i],(e=>this.events.push(e)),!1),e.addEventListener(t[i],(e=>this.onAdEvent_(e)),!1);const a=this.currentAdBreak;if(!a||a.isOutstream||a.isAdBreakFrontloaded())return void this.initAdManager(e);const s=this.videoPlayer_.getCurrentVideoTime(),d=this.videoPlayer_.getAdBreakTime(a);if(d<=s)this.initAdManager(e);else{l(`Waiting ${d-s} seconds before starting ad`);const t=setInterval((()=>{this.videoPlayer_.getCurrentVideoTime()>=d&&(clearInterval(t),this.initAdManager(e))}),100)}}started(){return this.events.some((e=>"start"===e.type))}initAdManager(e){if(this.videoPlayer_.isFullscreen())e.init(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN);else{var t=this.videoPlayer_.getVideoDimensions();e.init(t.width,t.height,google.ima.ViewMode.NORMAL)}}onContentPauseRequested_(){this.log("Ad event: contentPauseRequested"),this.dispatchEvent(ie),this.videoEndedCallbackEnabled=!1}onContentResumeRequested_(){this.log("Ad event: contentResumeRequested"),this.videoEndedCallbackEnabled=!0,this.videoAdUi.hideUi(),this.dispatchEvent(ae,!0)}async onAdEvent_(e){this.log("Ad event:",e?.type),this.logAdEvent(e);const t=window.ezVideoAdConductor?.getVideoAdConductor();switch(e.type){case google.ima.AdEvent.Type.AD_CAN_PLAY:this.setStatSourceIdFromAdEvent(e),this.isOutstream()&&(t||ezOutstreamPlayer.RaisePlayer(),this.videoObject.IsMagicEmbed&&window.parent.postMessage({name:"showOutstream"},"*"));const i=document.getElementById(`ez-video-ad-container-${this.videoObject.PlayerId}`);if(i){const e=i.getElementsByTagName("video");Array.from(e).forEach((e=>{e.getAttribute("poster")||e.setAttribute("poster",this.adPosterURL)}))}break;case google.ima.AdEvent.Type.STARTED:this.triggerPlayerEvent(p),this.dispatchEvent(Z),this.isPlaying=!0,this.currentAd=e.getAd(),this.log("Ad event getAd: ",e.getAd()),this.currentAd.isLinear()&&(this.adTrackingTimer=setInterval(this.onAdPlayTracker.bind(this),250),this.totalAdsPlaybackDuration+=this.currentAd.getDuration()),this.videoAdUi.onAdBreakStart(e);break;case google.ima.AdEvent.Type.LOADED:if(this.triggerPlayerEvent(y),this.setStatSourceIdFromAdEvent(e),this.videoPlayer_.paused()&&this.videoPlayer_.userPaused_)return;t||this.adsManager_?.start();break;case google.ima.AdEvent.Type.LOG:let a=e.getAdData();a.adError&&console.log("Non-fatal error occurred: "+a.adError.getMessage());break;case google.ima.AdEvent.Type.COMPLETE:break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.triggerPlayerEvent(m),this.onAllAdsCompleted(!1);break;case google.ima.AdEvent.Type.PAUSED:this.adsManager_.getRemainingTime()<=0&&this.onAllAdsCompleted(!1),this.triggerPlayerEvent(f),this.videoAdUi.onAdsPaused(),this.videoPlayer_.player?.player?.isClosing&&(l("Ad paused due to player closing - completing player disposal"),this.triggerPlayerEvent(P),ezOutstreamPlayer.Destroy());break;case google.ima.AdEvent.Type.RESUMED:this.triggerPlayerEvent(A),this.videoAdUi.onAdsResumed();break;case google.ima.AdEvent.Type.USER_CLOSE:e.getAd().isLinear()||(this.isAdRequested=!1,this.isPlaying=!1,this.videoAdUi.hideUi());break;case google.ima.AdEvent.Type.SKIPPED:this.totalAdsPlaybackDuration-=this.adsManager_.getRemainingTime();break;case google.ima.AdEvent.Type.DURATION_CHANGE:this.currentAd&&this.currentAd.isLinear()&&(this.totalAdsPlaybackDuration-=this.currentAd.getDuration());const s=e.getAd();s&&s.isLinear()&&(this.totalAdsPlaybackDuration+=s.getDuration())}}onAllAdsCompleted(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t="ez-o"===this.videoObject.PlayerId;if(t&&!this.isOutstream())return void l("Player is outstream but we didn't show an outstream ad",this.currentAdBreak);if(!t&&this.isOutstream())return void l("Player is not outstream but we showed an outstream ad",this.currentAdBreak);this.isAdRequested=!1,this.isPlaying=!1,this.log("all ads completed, destroying"),this.destroyAdsManager(),this.adTrackingTimer&&clearInterval(this.adTrackingTimer);let i=this.multiAuctionHandler.cleanupMultiAuctionBreak();if(this.isOutstream()&&(ezOutstreamPlayer.LowerPlayer(i),this.videoObject.IsMagicEmbed&&window.parent.postMessage({name:"hideOutstream"},"*")),!e&&!i){const e=this.isOutstream()?"outstream":"instream";window.ezVideoAdConductor?.getVideoAdConductor()?.cleanupForMultiAuction(e)}this.videoAdUi.hideUi(),this.videoAdUi.onAdBreakEnd(),this.adsLoader_.contentComplete(),this.dispatchEvent(ee)}setMultiBreaks(e,t){this.multiAuctionHandler.bestBreak=e,this.multiAuctionHandler.instreamBreak=t}onAdPlayTracker(){if(null==this.adsManager_)return;const e=this.adsManager_.getRemainingTime(),t=this.currentAd.getDuration();let i=t-e;i=i>0?i:0;let a,s=0;this.currentAd.getAdPodInfo()&&(a=this.currentAd.getAdPodInfo().getAdPosition(),s=this.currentAd.getAdPodInfo().getTotalAds()),this.videoAdUi.updateAdUi(i,e,t,a,s)}onAdError_(e){this.triggerPlayerEvent(w),this.logAdError(e);let t=h(e.getError());this.log("Ad error: "+t),this.destroyAdsManager();let i=e.getError().getErrorCode(),a=i;901===i&&(t.includes("303")&&(a=303),t.includes("1005")&&(a=1005)),901!==i&&402!==i||303===a||(l("Restarting player after ad error"),this.videoPlayer_.play());const s=this.currentAdBreak||this.multiAuctionHandler.bestBreak;if(s.maxHBBid){const[e,t]=s.getHighestBidWithSource();if("prebid"===t&&s.maxHBBidder){const e=__ez.vbf.getCache();if(e){const t=s?.maxHBBidder?.ezVideoCacheKey?s?.maxHBBidder?.ezVideoCacheKey:s?.maxHBBidder?.videoCacheKey;e.removeBid(t)&&(s.resetPrebidBid(),this.currentAdBreak=s)}}}if(s&&(!s.isOutstream&&u(s.isOutstream)||!s.onlyUseVastProxy()))l("Attempting to retry google ad rendering"),this.retryAdFill(e);else{const t=h(e.getError());this.resetForNoFill(s,t)}}retryAdFill(e){if(J()&&this.multiAuctionHandler.shouldConsiderSwitchingToOutstream(this.currentAdBreak))this.retryAdFillOrSwitch(e);else if(e){l("retryAdFill",e,this.currentAdBreak);var t=this.currentAdBreak;if(t){var i=!1,a=h(e.getError()),s=e.getError().getErrorCode();const d=901===s&&a.includes("303");if(1009===s||303===s||d?(this.log("retrying ad request",t),this.isAdRequested=!1,i=this.retryAdRequest(t)):(this.log("retryAdFill errorCode:",s,", description:",h(e.getError()),", adunit:",this.adUnit),1005===s&&t.retryCount<1&&(this.isAdRequested=!1,t.retryCount++,i=this.retryAdRequest(t))),!i&&t.isInstreamTruePrice()&&t.fallbackVastURL&&""!==t.fallbackVastURL&&t.vastURL!==t.fallbackVastURL)return l("retrying ad request fallback vast:",t),this.isAdRequested=!1,t.vastURL=t.fallbackVastURL,void this.requestAds(t);if(!i&&this.videoPlayer_){this.sendUnfilledVadPixel(h(e.getError())),this.triggerPlayerEvent(_),__ez.vhb.biddingComplete(t.getPlayerId());let i=this.multiAuctionHandler.cleanupMultiAuctionBreak();t.isOutstream&&"undefined"!==typeof ezOutstreamPlayer&&i&&(l("ad not filled"),ezOutstreamPlayer.CallNextAdBreak(!0)),l("finished retrying for ads"),this.handleResetRenderer()}}else l("Missing ad break for retry - skipping retry"),this.handleResetRenderer()}else l("Missing ad error event - skipping retry"),this.handleResetRenderer()}retryAdFillOrSwitch(e){l("retryAdFillOrSwitch");const t=this.multiAuctionHandler.bestBreak;if(!e)return void this.multiAuctionHandler.switchToOutstream(t);const i=this.currentAdBreak;if(!i)return void this.multiAuctionHandler.switchToOutstream(t);const a=i.getNextBid().bidValue,[s]=t.getHighestBidWithSource(),d=a>s&&i.bidFloorIndex<i.bidRetries;if(l("canBeatOutstream:",d,"nextBidValue:",a,"outstreamCPM:",s),d||i?.pmpDealsToConsider?.length>0){l("can still beat outstream, retrying ad request");let a=h(e.getError()),s=e.getError().getErrorCode(),d=901===s&&a.includes("303"),r=!1;1009===s||303===s||d?(l("retrying ad request fallback floor:",i),this.isAdRequested=!1,r=this.retryAdRequest(i)):(l("retryAdFillOrSwitch errorCode:",s,", description:",a,", adunit:",this.adUnit),1005===s&&i.retryCount<1&&(this.isAdRequested=!1,i.retryCount++,r=this.retryAdRequest(i))),r||(this.log("fallback not retried => switching to outstream"),this.handleResetRenderer(),this.multiAuctionHandler.switchToOutstream(t))}else l("No fallback (floor below outstream or no more retries). Switch to outstream"),this.handleResetRenderer(),this.multiAuctionHandler.switchToOutstream(t)}onLogEvent_(e){let t=e.getAdData();t.adError&&(l("Non-fatal error: "+h(t.adError)),this.sendUnfilledVadPixel(h(t.adError)))}handleResetRenderer(){l("resetting renderer"),this.videoAdUi.hideUi(),this.isAdRequested=!1,this.isPlaying=!1,this.dispatchEvent(ae,!1),this.dispatchEvent(ee)}resetForNoFill(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Ad Error Unknown";this.currentAdBreak=e,this.sendUnfilledVadPixel(t),this.triggerPlayerEvent(_),this.resetAdBreak(e)}sendUnfilledVadPixel(e){this.videoPlayer_.attachAdAnalytics(this.adUnit,void 0,this.videoObject,!1).videoAdEventHandler.sendUnfilledVadPixel(this.currentAdBreak,e)}resetAdBreak(e){e.removeCachedBidsFromAdBreak(),__ez.vhb.biddingComplete(e.getPlayerId());let t=this.multiAuctionHandler.cleanupMultiAuctionBreak();e.isOutstream&&"undefined"!==typeof ezOutstreamPlayer&&t&&(l("ad not filled"),ezOutstreamPlayer.CallNextAdBreak()),l("finished retrying for ads"),this.handleResetRenderer()}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];l(`[${this.getPlayerId()}]`,this.getImpressionId(),...t)}getImpressionId(){return this.currentAdBreak?.impressionId}getRequestId(){return`${this.getImpressionId()}-${this.numRequests}`}getPlayerId(){return this.videoPlayer_?.player?.player?.player_id}triggerPlayerEvent(e){this.videoPlayer_.player.player.trigger(e,this.getImpressionId())}logAdError(e){window.__ezDevtools?.addAdError&&__ezDevtools.addAdError(this.getImpressionId(),this.getRequestId(),this.getPlayerId(),e.getError().getErrorCode(),h(e.getError()))}logAdEvent(e){window.__ezDevtools?.addAdEvent&&__ezDevtools.addAdEvent(this.getImpressionId(),this.getRequestId(),this.getPlayerId(),e.type,e.getAd())}destroyAdsManager(){this.adsManager_&&(this.adsManager_.destroy(),this.adsManager_=null)}getCanShowMoreAds(){return this.isOutstream()||this.totalAdsPlaybackDuration+this.maxAdDuration<this.videoPlayer_.getVideoLength()}onFullscreenChange(){if(this.videoPlayer_.isFullscreen()){const e=this.videoPlayer_.getVideoDimensions();this.resize(e.width,e.height,!0),this.videoAdUi.onPlayerEnterFullscreen()}else this.resize(window.screen.width,window.screen.height,!1),this.videoAdUi.onPlayerExitFullscreen()}onVideoEnded(){this.videoEndedCallbackEnabled&&(this.contentEnded(),__ez.vhb.biddingComplete(this.videoPlayer_.player.player.player_id))}retryAdRequest(e){const t=e.bidRetries;if(e.bidFloorIndex>=t||"frontload"===e.videoFallbackType)return!1;googletag.companionAds&&window.ezVideo&&e.bidFloorIndex===t-1&&(googletag.companionAds().setRefreshUnfilledSlots(!0),window.ezVideo.stopCompanionRefresh=!1);const{hash:i,bidValue:a}=e.getNextBid();this.log("Using fallback floor",{index:e.bidFloorIndex,floor:a}),e.bidFloorIndex++,e.retryCount++;try{e.updateBidHash(i)}catch(s){return console.error(s.message),!1}return e.videoAdBidFloor=a,e.origVastURL=e.vastURL,e.addBidsToVAST(),e.updatePmpTargetingDeals(),l("Retry request",{retryCount:e.retryCount,bidFloor:e.videoAdBidFloor,bidHash:e.lastBidHash,prebid:e.maxHBBidder,aps:e.apsBid}),this.requestAds(e),!0}setStatSourceIdFromAdEvent(e){if(this.currentAdBreak&&!this.currentAdBreak.statSourceId){const t=g(e);t&&(this.log("Early determination of winning ad ID:",t),this.currentAdBreak&&"function"===typeof this.currentAdBreak.setStatSourceIdFromAdIdOrHbUUId&&(this.currentAdBreak.setStatSourceIdFromAdIdOrHbUUId(t),this.log("Set statSourceId early from ad ID:",this.currentAdBreak.statSourceId)))}}}const de=class{constructor(e,t,i,a){s(this,"videoPlayer",void 0),this.videoPlayer=e,this.trackBreaks_=function(e,t){let i=0,a=null;return function(){for(var s=arguments.length,d=new Array(s),r=0;r<s;r++)d[r]=arguments[r];const n=Date.now(),o=t-(n-i);o<=0?(i=n,e(...d)):a||(a=setTimeout((()=>{i=Date.now(),a=null,e(...d)}),o))}}((()=>this.trackBreaks()),1e3),this.videoPlayer.onTimeUpdate(this.trackBreaks_),this.filterAdBreaks(t),l("VideoAdtimer created. adBreaks:",e,t,"num ad breaks",this.adBreaks.length),this.setAdBreakSkipValue(),this.seekStart=null,this.previousTime=0,this.currentTime=0,this.isPrebidRenderer=i,this.earlyBiddingTriggered=!1,this.seekingInProgress=!1,this.onSeekHandleCallback=()=>this.onSeekHandle(),this.onSeekedHandleCallback=()=>this.onSeekedHandle(),this.videoPlayer.on(null,"seeking",this.onSeekHandleCallback),this.videoPlayer.on(null,"seeked",this.onSeekedHandleCallback),(this.videoPlayer.videoObject.MagicPlaceholderType===he||this.videoPlayer.videoObject.IsFloating&&this.videoPlayer.videoObject.IsAutoPlay)&&this.adBreaks.length>0&&(this.earlyBidListenerKey=window._hmx.topWindowBridge.addScrollListener(this.checkIfShouldTriggerEarlyBidding.bind(this))),this.maxUnfilledAdsMultiplier=1,"undefined"!==typeof _ezaq&&_ezaq.hasOwnProperty("ab_test_id")&&"mod231"===_ezaq.ab_test_id&&(this.maxUnfilledAdsMultiplier=2),this.isMultiAuction=a}setAdBreakSkipValue(){l("Setting ad break skip value");for(let e=0;e<this.adBreaks.length;e++)this.adBreaks[e].IsSkipped=!1}setFloatingAdBreaks(e){this.floatingAdBreaks=e}onSeekHandle(){null===this.seekStart&&(this.seekStart=this.previousTime)}onSeekedHandle(){this.seekingInProgress=!0,l("Handling seek, seekStart and currentTime: ",this.seekStart,this.currentTime,"num ad breaks",this.adBreaks.length),this.markBreaksAsSkipped(this.seekStart,this.currentTime)}checkIfShouldTriggerEarlyBidding(){window._hmx.topWindowBridge.getBoundingClientRectInTopWindow(this.videoPlayer.player.player.el()).top/window._hmx.topWindowBridge.getTopWindowInnerHeight()<1.3&&(window._hmx.topWindowBridge.removeScrollListener(this.earlyBidListenerKey),this.triggerEarlyBidding())}triggerEarlyBidding(){if(this.earlyBiddingTriggered)return void l("[VideoAdTimer] Early bidding already triggered");this.earlyBiddingTriggered=!0;let e=!1;window.__ezVideoFill&&!window.__ezVideoFill.isFetching&&window.__ezVideoFill.adBreak&&!window.__ezVideoFill.adBreak.isTriggered&&(window.__ezVideoFill.adBreak.isTriggered=!0,__ez.vhb.dispatchRenderAd(window.__ezVideoFill.adBreak,this.isPrebidRenderer),e=!0);const t=this.adBreaks.find((e=>!e.isTriggered&&!e.IsSkipped&&!e.isComplete&&0===e.timeOffsetSeconds));t&&(l("Scroll triggered early bidding"),t.isTriggered=!0,t.earlyBid=!0,this.markAdBreakAsTriggered(t),e||__ez.vhb.bid(t,this.isPrebidRenderer))}deactivateBreaks(){this.videoPlayer.offTimeUpdate(this.trackBreaks_),this.videoPlayer.off(null,"seeking",this.onSeekHandleCallback),this.videoPlayer.off(null,"seeked",this.onSeekedHandleCallback),this.floatingAdBreaks&&(this.floatingAdBreaks=void 0)}markBreaksAsSkipped(e,t){if(l("markBreaksAsSkipped",e,t),t>e){const i=[];for(let a=0;a<this.adBreaks.length;a++){const s=this.adBreaks[a],d=this.videoPlayer.getAdBreakTime(s);d>e&&d<=t&&!s.isTriggered&&!s.IsSkipped&&i.push(s)}if(l("breaksPassed",i),i.length>0){i.sort(((e,t)=>this.videoPlayer.getAdBreakTime(e)-this.videoPlayer.getAdBreakTime(t))),i.forEach((e=>{e.IsSkipped=!0}));const e=i[i.length-1];let a=null,s=1/0;for(let i=0;i<this.adBreaks.length;i++){const e=this.adBreaks[i];if(!e.isTriggered&&!e.IsSkipped){const i=this.videoPlayer.getAdBreakTime(e);i>t&&i<s&&(s=i,a=e)}}(!a||a&&this.videoPlayer.getAdBreakTime(a)-t>30)&&(l("Unskipping last break",e),e.IsSkipped=!1)}}else for(let i=0;i<this.adBreaks.length;i++){const a=this.adBreaks[i],s=this.videoPlayer.getAdBreakTime(a);s>t&&s<=e&&(a.IsSkipped=!1)}this.seekingInProgress=!1,this.seekStart=null,this.trackBreaks()}async trackBreaks(){if(this.seekingInProgress)return;this.previousTime=this.currentTime,this.currentTime=this.videoPlayer.getCurrentVideoTime();const[e,t]=this.shouldBid();if(!e)return;let i=this.adBreaks;(this.videoPlayer.isEmbedCurrentlyFloating()||this.videoPlayer.isCurrentlyFloating())&&this.floatingAdBreaks?.length&&(i=this.floatingAdBreaks);let a=this.videoPlayer.getNextAdBreak(i),s=a.nextBreak,d=a.idx;window.lastVideoFloor&&(__ezInstream.useNewVideoStartingFloor?s.setStartingBidFloor(window.lastVideoFloor.instream):window.lastVideoFloor.instream>=0&&s.setFallbackPosition(3*window.lastVideoFloor.instream)),i&&i[d]&&this.markAdBreakAsTriggered(i[d]);let r=__ezInstream.UnfilledCnt>=3*this.maxUnfilledAdsMultiplier;if(this.isMultiAuction&&(r=__ezInstream.UnfilledCnt>=3*this.maxUnfilledAdsMultiplier*2),r)l("Hit max unfilled ad request limit - not requesting more ads");else if(this.isMultiAuction&&s.isAdBreakFrontloaded()){l("bidding on multiple breaks"),__ez.vhb.biddingInProcess[s.getPlayerId()]=!0;const e=[s],t=window.ezVideoAdConductor?.getVideoAdConductor();let i,a;t&&(i=t.getOutstreamPlayer()),i&&"function"===typeof i.getNextOutstreamBreak&&(a=await(i?.getNextOutstreamBreak(!1))),a&&e.push(a),__ez.vhb.bidMultipleBreaks(e,this.isPrebidRenderer)}else __ez.vhb.bid(s,this.isPrebidRenderer)}shouldBid(){let e=this.adBreaks;(this.videoPlayer.isEmbedCurrentlyFloating()||this.videoPlayer.isCurrentlyFloating())&&"undefined"!==typeof this.floatingAdBreaks&&this.floatingAdBreaks.length>0&&(e=this.floatingAdBreaks);let t=this.videoPlayer.getNextAdBreak(e);if(void 0===t||void 0===t.nextBreak||void 0===t.idx)return[!1,"No valid next break object found"];let i=t.nextBreak;if(i.isTriggered)return[!1,"Ad break has already been triggered"];if(i.isComplete)return[!1,"Ad break has already been completed"];if(i.IsSkipped)return[!1,"Ad break has been skipped"];if(__ez.vhb.getBiddingInProcess(this.videoPlayer.player.player.player_id))return[!1,`Bidding is already in process for player ${this.videoPlayer.player.player.player_id}`];if(this.videoPlayer.paused())return[!1,"Video is paused"];let a=this.videoPlayer.getAdBreakTime(i);if(void 0===a)return[!1,"Invalid ad break time"];let s=this.videoPlayer.getCurrentVideoTime();if(void 0===s)return[!1,"Invalid current video time"];if(i?.isAdBreakCustomPosition()){const e=a-s;window.__ez.nextCustomBreak={break:i,timeUntilBreak:e}}else window.__ez.nextCustomBreak=null;return a-s>=10&&!i.isAdBreakFrontloaded()?[!1,"Ad break is more than 10 seconds away and is not a FrontLoad position"]:[!0,"All conditions met for bidding"]}filterAdBreaks(e){"undefined"!==typeof isSharedEmbed&&isSharedEmbed&&(this.floatingAdBreaks=e.filter((e=>e.key.includes("floatingembed")))),this.adBreaks=e.filter((e=>!e.key.includes("floatingembed")))}markAdBreakAsTriggered(e){e.isTriggered=!0,e.isFloating?this.floatingAdBreaks?.forEach((t=>{t.key!==e.key&&t.timeOffsetSeconds<=e.timeOffsetSeconds&&(t.isTriggered=!0)})):this.adBreaks.forEach((t=>{t.key!==e.key&&t.timeOffsetSeconds<=e.timeOffsetSeconds&&(t.isTriggered=!0)}))}markAllBreaksAsTriggered(){for(let e=0;e<this.adBreaks.length;e++)this.adBreaks[e].isOutstream||(this.adBreaks[e].isTriggered=!0);if(this.floatingAdBreaks)for(let e=0;e<this.floatingAdBreaks.length;e++)this.floatingAdBreaks[e].isTriggered=!0}};function re(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ne(e,t){return e.get(le(e,t))}function oe(e,t,i){return e.set(le(e,t),i),i}function le(e,t,i){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:i;throw new TypeError("Private element is not present on this object")}const he=1;var ue=new WeakMap,ce=new WeakSet;class ge extends W{constructor(e,t,i,a,d,r,n){var o,l;super(),re(o=this,l=ce),l.add(o),s(this,"videoPlayer_",void 0),s(this,"vadTimer",void 0),s(this,"videoAdUi",void 0),function(e,t,i){re(e,t),t.set(e,i)}(this,ue,void 0),this.videoPlayer_=e,this.adUnit=t,this.adBreaks=i,this.adsInitializer=a,this.isPlayList=d,this.videoObject=r,this.browserPermissions=n,this.adsActive_=!1,this.floatingAdBreaks=[],this.vadTimer=new de(this.videoPlayer_,this.adBreaks,!1,J()),this.isOutstream=!1,this.videoAdUi=new K(e),this.videoAdUi.addEventListener(Q,(()=>this.togglePlayPause())),this.videoAdUi.addEventListener(G,(()=>this.toggleMuteUnmute())),this.videoAdUi.addEventListener($,(()=>this.toggleFullscreen())),le(ce,this,ve).call(this),__ez.vhb.addListener("RenderAdBreak",(e=>this.handleRenderAdEvent(e)))}onAdStarted(e){ne(ue,this).addEventListener(Z,e)}onAdCompleted(e){ne(ue,this).addEventListener(ee,e)}async initialize(){}requestAds(e){ne(ue,this).requestAds(e)}handleRenderAdEvent(e){if(e.AdBreaks)return void this.handleMultipleAdBreaks(e.AdBreaks);const t=e.AdBreak;if(this.isMyAdBreak(t.key))if(t?.noFill)ne(ue,this).resetForNoFill(t,"No bids available");else if(t?.IsSkipped||this.vadTimer.seekingInProgress)ne(ue,this).resetAdBreak(t);else if(this.waitForAutoPlay(t)){l("attaching outstream play event since it's paused");window.ezVideoAdConductor.getVideoAdConductor().autoPlayInstreamPlayer.one(m,(()=>this.handleRenderAdEvent(e)))}else"start"===t.timeOffset&&"NoFallback"===t.videoFallbackType&&this.videoPlayer_.pause(),this.requestAds(t)}handleMultipleAdBreaks(e){l("handleMultipleAdBreaks",e);const{bestBreak:t,instreamBreak:i}=e;if(!t)return void l("[handleMultipleAdBreaks] No best break found, skipping multi-break logic.");if(ne(ue,this).setMultiBreaks(t,i),!this.isMyAdBreak(t.key))return void l("[handleMultipleAdBreaks] Only handle the best break if it's mine",t.key);if(t&&t.noFill)return void ne(ue,this).resetForNoFill(t,"No bids available");if(!t.isOutstream)return l("[handleMultipleAdBreaks] Best is instream, requesting ads normally."),void this.requestAds(t);if(!i)return l("[handleMultipleAdBreaks] Outstream is best, no instream fallback. Using outstream..."),void this.requestAds(t);let[a]=t.getHighestBidWithSource();l(`[handleMultipleAdBreaks] Outstream CPM: ${a}`);l(`[handleMultipleAdBreaks] Instream CPM: ${i.getNextBid().bidValue}`),window.ezVideoAdConductor?.getVideoAdConductor()?.startOutstreamInsteadOfInstream(t)}waitForAutoPlay(e){const t=window.ezVideoAdConductor?.getVideoAdConductor();return!(this.videoPlayer_.videoObject.MagicPlaceholderType===he&&e.earlyBid)&&this.isOutstream&&t?.autoPlayInstreamPlayer&&(t.autoPlayInstreamPlayer.isCurrentlyFloating()||t.autoPlayInstreamPlayer.isAdInProgress()&&!t.autoPlayInstreamPlayer.isAdPaused())}isMyAdBreak(e){let t=e.toLowerCase().includes("outstream");return this.isOutstream?t:!t&&(this.adBreaks.some((t=>t.key===e))||this.floatingAdBreaks?.some((t=>t.key===e)))}requestAllAds(e){this.adBreaks=e,this.vadTimer.deactivateBreaks(),this.vadTimer=new de(this.videoPlayer_,this.adBreaks,!1,J())}pauseAd(){ne(ue,this).pause()}resumeAd(){ne(ue,this).resume()}isAdPlaying(){return ne(ue,this).isAdPlaying()}togglePlayPause(){ne(ue,this).isAdPlaying()?ne(ue,this).pause():ne(ue,this).resume()}toggleMuteUnmute(){ne(ue,this).isAdMuted()?(this.videoPlayer_.setPlayerVolume(1),ne(ue,this).unmute()):(this.videoPlayer_.setPlayerVolume(0),ne(ue,this).mute())}toggleFullscreen(){this.videoPlayer_.toggleFullscreen()}resumeAfterAd(e){e&&(this.videoPlayer_.ended()&&!this.isPlaylist||this.videoPlayer_.play()),this.adsActive_=!1;let t=this.videoPlayer_.getVideoContainer().getElementsByClassName("vjs-control-bar");t&&t.length>0&&(t[0].style=null),this.videoPlayer_.trigger("resume-after-ad")}pauseForAd(){this.adsActive_=!0,this.videoPlayer_.pause();let e=this.videoPlayer_.getVideoContainer().getElementsByClassName("vjs-control-bar");e&&e.length>0&&(e[0].style.opacity=0),this.videoPlayer_.trigger("pause-for-ad")}enableOutstream(){this.isOutstream=!0}setAllBreaksToTriggered(){this.vadTimer.markAllBreaksAsTriggered()}getCurrentAdProgress(){if(!ne(ue,this)||!ne(ue,this).adsManager_||!ne(ue,this).currentAd)return 0;let e=ne(ue,this).adsManager_.getRemainingTime(),t=ne(ue,this).currentAd.getDuration()-e;return t=t>0?t:0,t}cleanupForMultiAuction(){ne(ue,this).onAllAdsCompleted(!0)}handleSwitchToOutstream(e){l("handleSwitchToOutstream",e),this.requestAds(e)}setFloatingAdBreaks(e){this.floatingAdBreaks=e,this.vadTimer&&this.vadTimer.setFloatingAdBreaks(e)}isAdReadyToStart(){return ne(ue,this).adsLoaded&&ne(ue,this).adsManager_&&!ne(ue,this).started()}getCurrentImpressionId(){return ne(ue,this).getImpressionId()}getCurrentAdBreak(){return ne(ue,this).currentAdBreak}isAdInProgress(){return!!ne(ue,this).adsManager_}isAdsActive(){return this.adsActive_}setRenderer(e){oe(ue,this,e)}}function ve(){let e=30;this.adBreaks.length>0&&this.adBreaks[0].params&&this.adBreaks[0].params.max&&(e=this.adBreaks[0].params.max/1e3);let t=this.videoPlayer_.isPlayerAutoplay()&&this.browserPermissions?.autoplay_allowed;oe(ue,this,new se(this.videoPlayer_,this.adUnit,this.adsInitializer,this.isPlayList,this.videoObject,t,e,this.videoAdUi)),ne(ue,this).addEventListener(te,(()=>this.setAllBreaksToTriggered())),ne(ue,this).addEventListener(ie,(()=>this.pauseForAd())),ne(ue,this).addEventListener(ae,(e=>this.resumeAfterAd(e))),ne(ue,this).addEventListener(Z,(()=>{this.isOutstream}))}class pe{constructor(e){e&&"undefined"!==typeof __ezOutstream?this.__ezPixelObj=__ez.osvaep:this.__ezPixelObj=__ez.vaep}addCounts(e){var t=e.uuid;e.play_cnt>0&&this.__ezPixelObj.Add(t,[new __ezDotData("play_cnt",e.play_cnt)],e),e.pause_cnt>0&&this.__ezPixelObj.Add(t,[new __ezDotData("pause_cnt",e.pause_cnt)],e)}addMediaSrc(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("ad_src",t)],i)}addSystem(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("ad_system",t)],i)}addClient(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("ad_client",t)],i)}addStart(e,t,i){var a=c();this.__ezPixelObj.Add(e,[new __ezDotData("ad_start",a),new __ezDotData("offset_ad_start",t)],i)}addCompleted(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("completed",1)],t)}addErrored(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("errored",1)],t)}addSkipped(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("skipped",1)],t)}addClicked(e,t){"undefined"!==typeof __ez&&"undefined"!==typeof __ez.pel&&(__ez.pel.AddById(t.ad_unit+"//"+t.impression_id,[new __ezDotData("click",1)],__ez.template.isOrig),t.ad_unit,t.impression_id),this.__ezPixelObj.Add(e,[new __ezDotData("clicked",1)],t)}addViewed(e,t,i,a){i=i?1:0,this.__ezPixelObj.Add(e,[new __ezDotData("viewed_"+t,i)],a)}addHeard(e,t,i,a){i=i?1:0,this.__ezPixelObj.Add(e,[new __ezDotData("heard_"+t,i)],a)}addViewable(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("viewable",1)],t)}addAdBounce(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("ad_bounce",1)],t)}addPodData(e,t,i){this.__ezPixelObj.Add(e,[new __ezDotData("total_ads",t.total_ads),new __ezDotData("ad_length",i)],t)}addAdClosed(e,t){this.__ezPixelObj.Add(e,[new __ezDotData("closed",1)],t)}fire(){this.__ezPixelObj.Fire()}}const _e=11324,me=11337;class ye{constructor(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.isOutstream=t.toLowerCase().includes("outstream"),this.currentAdBreak=e.adRenderer.getCurrentAdBreak(),this.adPixels=new pe(this.isOutstream),this.useVastProxy=!u(this.isOutstream),_ezaq.hasOwnProperty(["visit_uuid"])?this.visit_uuid=_ezaq.visit_uuid:this.visit_uuid=d("ezovuuid_"+_ezaq.domain_id),this.vadStoreURL=this.isOutstream?"/porpoiseant/osvad.gif":"/porpoiseant/vad.gif",this.player=e,this.adUnit=t,this.videoContentShare=a,this.paused=!1,this.firstViewable=null,this.videoObject=i,this.adData={},this.adPodVaID="",this.cumulativeAdLength=0,this.unloadAllCallback=this.bind_(this,this.unloadAll),this.adBounceCallback=this.bind_(this,this.handleAdBounce),this.firedImps={},this.isOutstream&&this.bind_(this,this.attachOutstreamPlayerEvent)(),ez_attachEvent(document,"blur",this.unloadAllCallback),ez_attachEvent(window,"beforeunload",this.unloadAllCallback),ez_attachEvent(window,"blur",this.unloadAllCallback),ez_attachEvent(window,"pagehide",this.unloadAllCallback),ez_attachEvent(window,"unload",this.unloadAllCallback)}bind_(e,t){return function(){t.apply(e,arguments)}}initAdImpression(){l("Getting ad data for player"),this.adData.url=_ezaq.url,this.adData.pageview_id=_ezaq.page_view_id,_ezaq.hasOwnProperty(["visit_uuid"])?this.adData.visit_uuid=_ezaq.visit_uuid:this.adData.visit_uuid=d("ezovuuid_"+_ezaq.domain_id),this.adData.template_id=_ezaq.template_id,this.adData.domain_id=_ezaq.domain_id,this.adData.ab_test_id=_ezaq.ab_test_id,this.adData.vab_test_id=_ezaq.ab_test_id,""===this.adPodVaID?this.adData.video_ad_impression_id=this.generateUUID():this.adData.video_ad_impression_id=this.adPodVaID,this.generateInitAdData(this.adData.video_ad_impression_id),this.adData.ad_position="start",this.player.analytics&&!this.isOutstream&&(this.adData.video_impression_id=this.player.analytics.getVideoImpressionUUID()),this.adData.ad_client="Google IMA",this.isPrebidPlayerAdClient()&&(this.adData.ad_client="Prebid Player"),this.adData.ad_system="Google Ad Manager",this.adData.ad_index=1,this.currentAdBreak.isOutstream&&("undefined"!==typeof ezVideoAdConductor&&(this.adData.is_universal=!0),this.adData.ad_index=__ezOutstream.AdIndex,__ezOutstream.AdIndex+=1),this.videoContentShare&&Object.keys(this.videoContentShare).length>0&&n(this.videoContentShare)&&(this.adData.owner_domain_id=this.videoContentShare.DomainIdOwner),this.adData.humix_channel_id=this.videoObject.HumixChannelId,this.adData.player_name=this.player.playerDef,this.adData.float_pos=this.currentAdBreak?.floatPosition??E,this.currentAdBreak.isOutstream?(this.adData.is_outstream=!0,"undefined"!==typeof window.ezslot_outstream&&"undefined"!==typeof __ezOutstream&&__ezOutstream.fallbackToGPT&&(this.adData.is_gpt_outstream=!0)):this.adData.is_outstream=!1,this.adData.cnx_backfill=this.currentAdBreak.cnx_backfill,this.adData.no_retry="undefined"!==typeof __ezOutstream&&__ezOutstream.rampUp||"undefined"!==typeof __ezInstream&&__ezInstream.rampUp?1:0,this.adData.is_multi_auction=this.currentAdBreak?.isMultiAuction??0;var e=this.getDimensions();this.adData.height=e.height,this.adData.width=e.width}generateInitAdData(e){this.adData.uuid=e,this.adData.play_cnt=0,this.adData.pause_cnt=0,this.adData.completed=!1,this.adData.errored=!1,this.adData.skipped=!1,this.adData.clicked=!1,this.adData.viewable=!1}generateUUID(){var e=(new Date).getTime();return e+=performance.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?i:3&i|8).toString(16)}))}unloadAll(){this.adPixels.addCounts(this.adData),this.adPixels.fire()}handleQuartileEvent(e){let t;switch(e.type){case"firstQuartile":t="first_quartile";break;case"midpoint":t="middle";break;case"thirdQuartile":t="third_quartile";break;default:return void l("Could not find quartile for type =",e.type)}let i=this.player.getPlayerViewable()?1:0,a=(this.player.getPlayerVolume(this)>=10&&this.player.getPlayerMute(this),this.adData.uuid);this.adPixels.addViewed(a,t,i)}async handleInitialTime(e){l("handleInitialTime",this.useVastProxy,this.currentAdBreak,this.currentAdBreak.impressionId,this.firedImps[this.currentAdBreak.impressionId]),this.firedImps[this.currentAdBreak.impressionId]=!0;let t=g(e);this.currentAdBreak&&"function"===typeof this.currentAdBreak.handleWinningAdIdOrHbUUId?this.currentAdBreak.handleWinningAdIdOrHbUUId(t):"function"===typeof this.currentAdBreak.removeCachedBidsFromAdBreak&&this.currentAdBreak.removeCachedBidsFromAdBreak(),this.adData={ad_filled:1},this.currentAdBreak.didS2SBidderWin?this.adData.is_winner_s2s=1:this.adData.is_winner_s2s=0,!0===this.isOutstream&&"undefined"!==typeof __ezOutstream?(__ezOutstream.UnfilledCnt=0,this.currentAdBreak&&this.currentAdBreak.isMultiAuction&&"undefined"!==typeof __ezInstream&&(__ezInstream.UnfilledCnt=0)):(__ezInstream.UnfilledCnt=0,this.currentAdBreak&&this.currentAdBreak.isMultiAuction&&"undefined"!==typeof __ezOutstream&&(__ezOutstream.UnfilledCnt=0)),this.adSystem="",this.initAdImpression(),"function"===typeof e.getAd&&("function"===typeof e.getAd().getDuration&&(this.adData.ad_length=Math.round(e.getAd().getDuration())||0,this.cumulativeAdLength+=this.adData.ad_length),"function"===typeof e.getAd().getAdSystem&&(this.adSystem=e.getAd().getAdSystem(),this.adData.ad_system=this.adSystem,l("Ad Source (Advertiser name): "+this.adSystem)));let i=1;if(this.currentAdBreak&&e&&"function"===typeof e.getAd){let t=e.getAd(),a=t.getAdPodInfo();if(i=a.getTotalAds(),this.adData.total_ads=a.getAdPosition(),i>1&&1===this.adData.total_ads?(l("AdPods loaded, total_ads:  "+i+"."),this.adPodVaID=this.adData.uuid):1===i&&(this.adPodVaID=""),"undefined"!==typeof google&&google.ima&&google.ima.CompanionAdSelectionSettings){let e=new google.ima.CompanionAdSelectionSettings;e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.STATIC,e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.IMAGE,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE;let i=t.getCompanionAds(300,250,e);this.adData.has_companion=i.length>0?1:0}else this.adData.has_companion=0;if(this.currentAdBreak.impressionId=this.currentAdBreak.impressionId,i>1&&this.adData.total_ads>1)this.adPixels.addPodData(this.adData.uuid,this.adData,this.cumulativeAdLength);else{this.handleAdBreakData(this.currentAdBreak);let e=this.videoObject.IsSharedEmbed||this.videoObject.IsMagicEmbed;this.handleAdImpressionData(e)}}let a=this.adData.uuid,s=this.player.getPlayerViewable()?1:0;this.adPixels.addStart(a,this.player.getCurrentVideoTime(),this.adData),this.adPixels.addViewed(a,"start",s),ez_attachEvent(window,"visibilitychange",this.adBounceCallback)}handlePlayEvent(e){l("Play event triggered for ad "+this.adData.uuid+"."),this.paused=!1,this.adData.play_cnt++}handlePauseEvent(e){l("Pause event triggered for ad "+this.adData.uuid+"."),this.paused=!0,this.firstViewable=null,this.adData.pause_cnt++}handleCompleteEvent(e){if(l("Complete event triggered for ad "+this.adData.uuid+"."),__ez.vhb.biddingComplete(this.videoObject.PlayerId),this.adData.completed)return void l("Complete event has already completed.");var t=this.adData.uuid;let i=this.player.getPlayerViewable()?1:0;this.adData.completed=!0,this.adPixels.addCompleted(t,this.adData),this.adPixels.addViewed(t,"end",i),this.unloadAll(),ez_detachEvent(document,"blur",this.unloadAllCallback),ez_detachEvent(window,"beforeunload",this.unloadAllCallback),ez_detachEvent(window,"blur",this.unloadAllCallback),ez_detachEvent(window,"pagehide",this.unloadAllCallback),ez_detachEvent(window,"unload",this.unloadAllCallback),ez_detachEvent(window,"beforeunload",this.adBounceCallback)}handleSkipEvent(e){if(__ez.vhb.biddingComplete(this.videoObject.PlayerId),l("Skip event triggered for ad "+this.adData.uuid+"."),this.adData.completed)return;let t=document.getElementById("adContainer");t&&(t.style.display="none"),this.adData.completed=!0,this.adPixels.addSkipped(this.adData.uuid,this.adData)}handleClickEvent(e){l("Click event triggered for ad "+this.adData.uuid+"."),this.adData.completed||(this.adData.completed=!0,this.adPixels.addClicked(this.adData.uuid,this.adData))}handleLogEvent(e){if("function"===typeof e.getAdData){let t=e.getAdData();if(t.adError){let e=t.adError;l("adError Type: "+e.getType()),l("adError: ",e),this.adData.uuid&&!this.adData.errored&&(this.adData.errored=!0,this.adPixels.addErrored(this.adData.uuid,this.adData))}}}handleAdProgressEvent(e){if(this.adData.viewable||!this.player.getPlayerViewable()||this.paused)this.firstViewable=null;else if(this.firstViewable){new Date-this.firstViewable>2e3&&(this.adData.viewable=!0,this.adPixels.addViewable(this.adData.uuid,this.adData))}else this.firstViewable=new Date}handleAdBreakData(e){this.adData.impression_id=e.impressionId,this.adData.ad_position=e.timeOffset,this.adData.ad_unit=this.adUnit,this.adData.ad_src=e.vastURL,this.adData.param_gen=e.paramGen,this.adData.position_gen=e.positionGen,this.adData.vad_type=e.breakType,this.adData.skippable=e.params&&e.params.skip,"undefined"!==typeof e.params&&(this.adData.min_ad_length=e.params.min,this.adData.max_ad_length=e.params.max,this.adData.ad_type=e.params.ad_type,this.adData.allowed_ad_sizes=e.params.ad_sizes),this.adData.t_pageview_epoch=_ezaq.t_epoch,this.adData.stat_source_id=e.statSourceId,this.adData.initial_stat_source_id=e.statSourceId,this.adData.bidders=`[${e.bidders}]`,this.adData.received_bidders=`[${e.receivedBidders}]`,this.adData.prebid_cpm=e.prebidCPM,void 0!==this.player.player.player.video_position_id&&(this.adData.video_position_id=this.player.player.player.video_position_id),this.adData.auction_retry_count=e.retryCount,this.adData.fallback_type=e.videoFallbackType,this.adData.bid_floor_gen=e.bidFloorGen,this.adData.multiplier=e.multiplier,this.adData.unmodified_cpm=e.videoAdBidFloorUnmodified,this.adData.unmodified_cpm_mean_abs_dev=e.videoAdBidFloorCPMMeanAbsDev,this.adData.cpm_query_type=e.queryType,this.adData.unmodified_cpm_std=e.videoAdBidFloorCPMStd,this.adData.unmodified_cpm_impression_cnt=e.videoAdBidFloorImpressions,this.adData.position_config=e.positionConfig,this.adData.floor_perturbance_size=e.videoAdBidFloorPerturbanceSize,this.adData.ad_filled&&(this.adData.winning_bid_floor=e.videoAdBidFloor),e&&e.statSourceId&&[_e,me].includes(e.statSourceId)&&e.apsBid&&e.apsBid.bidVal&&(this.adData.aps_cpm=e.apsBid.bidVal),void 0===window.lastVideoFloor?window.lastVideoFloor={instream:-1,outstream:-1,last:e.videoAdBidFloor,highest:e.videoAdBidFloor}:window.lastVideoFloor.last=e.videoAdBidFloor,e.videoAdBidFloor>window.lastVideoFloor.highest&&(window.lastVideoFloor.highest=e.videoAdBidFloor),e.isOutstream?(window.lastVideoFloor.outstream=e.videoAdBidFloor,this.adData.ad_filled&&(11337===e.statSourceId&&e.apsBid?window.lastVideoFloor.outstream=e.apsBid.bidVal:"number"===typeof e.prebidCPM&&e.prebidCPM>=0&&(window.lastVideoFloor.outstream=e.prebidCPM))):window.lastVideoFloor.instream=e.videoAdBidFloor,this.adData.max_hb_bid=e.maxHBBid,this.adData.bid_floor_type=e.bidFloorType,void 0!==this.player.player.player.video_position_id&&(this.adData.is_floating=this.player.player.player.is_floating?1:0),this.adData.no_retry="undefined"!==typeof __ezOutstream&&__ezOutstream.rampUp||"undefined"!==typeof __ezInstream&&__ezInstream.rampUp?1:0,this.adData.initial_bid_floor=e.initialBidFloor,this.adData.winning_bid_hash=e.lastBidHash;let t="undefined"!==typeof ezdcr?ezdcr:"USD";this.adData.dfp_currency=t;let i="undefined"!==typeof ezacr?ezacr:"USD";this.adData.adx_currency=i}realTimeBidFloorValue(e){if(this.adData.ad_filled){if((11337===e.statSourceId||11324===e.statSourceId)&&e.apsBid)return e.apsBid.bidVal;if("number"===typeof e.prebidCPM&&e.prebidCPM>=0)return e.prebidCPM}return e.videoAdBidFloor}bidFloorToRealValue(e){return e/=1e3,isNaN(e)&&(e=0),e<=0&&(e=2e-6),e}handleAdImpressionData(e){l("Sending vad.gif");let t=this;var i=__ez.dot.getURL(this.vadStoreURL);if(__ez.dot.Fire(i,this.adData),"undefined"===typeof __ez||"undefined"===typeof __ez.pel)return;let a=t.bidFloorToRealValue(t.adData.winning_bid_floor),s=a;if("undefined"!==typeof t.adData.stat_source_id){let e=[new __ezDotData("stat_source_id",t.adData.stat_source_id)];if(t.adData.stat_source_id!==_e&&t.adData.stat_source_id!==me){let e=t.adData.prebid_cpm;!this.didBypassGAM()&&this.currentAdBreak.isInstreamTruePrice()&&(l("adjusting prebid cpm for google"),e-=.18,e=Math.max(0,e)),s=e/1e3}else[_e,me].includes(t.adData.stat_source_id)&&t.adData.aps_cpm&&(s=t.adData.aps_cpm/1e3);__ez.pel.AddById(t.adData.ad_unit+"//"+t.adData.impression_id,e,__ez.template.isOrig,s,a),l("Stat source id pixel: "+t.adData.ad_unit+"//"+t.adData.impression_id+", stat_source_id = "+t.adData.stat_source_id+", rev = "+s)}let d=[new __ezDotData("loaded",1),new __ezDotData("viewed",1)];if(__ez.pel.AddById(t.adData.ad_unit+"//"+t.adData.impression_id,d,__ez.template.isOrig,s,a),l("Loaded pixel: "+t.adData.ad_unit+"//"+t.adData.impression_id+", rev = "+s+", bidFloorFilled = "+a),e){let e=new CustomEvent("reportPageviewAnalytics",{detail:{pageviewId:t.adData.pageview_id,dotName:"est_revenue_usd",dotData:s}});dispatchEvent(e)}else __ez.bit.Add(t.adData.pageview_id,[new __ezDotData("est_revenue_usd",s)])}handleAdBounce(){this.player?.adRenderer?.isAdsActive()&&(l("Ad bounce"),this.adPixels.addAdBounce(this.adData.uuid,this.adData))}sendUnfilledVadPixel(e,t){l("UnfilledVadPixel"),this.adData={ad_filled:0,error_message:t};var i=[1005],a=[303,302,1009];let s=!1,d=this.extractAdErrorCodes(t),r=!1,n=this.isOutstream?__ezOutstream:__ezInstream;n&&n.hasOwnProperty("SelectivelyIncrementUnfilledCount")&&n.SelectivelyIncrementUnfilledCount&&(r=!0),s=r?d.some((e=>a.includes(e))):!d.some((e=>i.includes(e))),s&&(!0===this.isOutstream&&"undefined"!==typeof __ezOutstream?__ezOutstream.UnfilledCnt++:__ezInstream.UnfilledCnt++),e.impressionId=this.currentAdBreak.impressionId,this.initAdImpression(),this.handleAdBreakData(e);var o=__ez.dot.getURL(this.vadStoreURL);__ez.dot.Fire(o,this.adData)}extractAdErrorCodes(e){if(!e)return[];for(var t,i=/AdError\s+(\d+)/g,a=[];null!==(t=i.exec(e));)a.push(parseInt(t[1],10));return a}attachOutstreamPlayerEvent(){this.player.getEventEmitter().one("ezoPlayerClosed",(e=>{this.adData.closed=!0,this.adPixels.addAdClosed(this.adData.uuid,this.adData)}))}didBypassGAM(){return this.currentAdBreak.vastURL.startsWith("https://vastproxy.ezoic.net")}isPrebidPlayerAdClient(){return this.useVastProxy||this.currentAdBreak.isOutstream&&this.currentAdBreak.onlyUseVastProxy()||this.didBypassGAM()}getDimensions(){if(this.player&&this.player.videoPlayerContainer_){let e=this.player.videoPlayerContainer_.getBoundingClientRect().width,t=this.player.videoPlayerContainer_.getBoundingClientRect().height;return e=!e||isNaN(e)?this.player.videoPlayerContainer_.offsetWidth:Math.round(e),t=!t||isNaN(t)?this.player.videoPlayerContainer_.offsetHeight:Math.round(t),e<=0&&(e=this.player.videoPlayerContainer_.offsetWidth),t<=0&&(t=this.player.videoPlayerContainer_.offsetHeight),{width:e,height:t}}return{width:0,height:0}}}class fe{constructor(e,t,i,a){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,d=arguments.length>5?arguments[5]:void 0;this.videoAdEventHandler=new ye(e,t,a,s),this.adsManager_=i,this.isReady=!1,this.isPrebidRenderer=d,this.prebidBoundHandlers={},this.isPrebidRenderer&&(this.boundHandlers={handleInitialTime:this.videoAdEventHandler.handleInitialTime.bind(this.videoAdEventHandler),handleCompleteEvent:this.videoAdEventHandler.handleCompleteEvent.bind(this.videoAdEventHandler),handleSkipEvent:this.videoAdEventHandler.handleSkipEvent.bind(this.videoAdEventHandler),handleLogEvent:this.videoAdEventHandler.handleLogEvent.bind(this.videoAdEventHandler),handleAdProgressEvent:this.videoAdEventHandler.handleAdProgressEvent.bind(this.videoAdEventHandler),handleQuartileEvent:this.videoAdEventHandler.handleQuartileEvent.bind(this.videoAdEventHandler),handlePauseEvent:this.videoAdEventHandler.handlePauseEvent.bind(this.videoAdEventHandler),handlePlayEvent:this.videoAdEventHandler.handlePlayEvent.bind(this.videoAdEventHandler),handleClickEvent:this.videoAdEventHandler.handleClickEvent.bind(this.videoAdEventHandler)}),this.isPrebidRenderer?this.registerPrebidEventHandlers():this.registerAdEventHandlers()}bindHandler(e){if(!this.isPrebidRenderer)return null;if(!this.prebidBoundHandlers[e]){const t={adStarted:"handleInitialTime",adComplete:"handleCompleteEvent",adSkipped:"handleSkipEvent",adError:"handleLogEvent",adProgress:"handleAdProgressEvent",adQuartile:"handleQuartileEvent",adPaused:"handlePauseEvent",adResumed:"handlePlayEvent",adClick:"handleClickEvent"}[e];if(!t||!this.boundHandlers[t])return console.warn(`No handler found for event: ${e}`),()=>{};this.prebidBoundHandlers[e]=this.boundHandlers[t]}return this.prebidBoundHandlers[e]}registerPrebidEventHandlers(){if(!this.adsManager_)return;let e=this.adsManager_.adEventHandler;["adStarted","adComplete","adSkipped","adError","adProgress","adQuartile","adPaused","adResumed","adClick"].forEach((t=>{const i=this.bindHandler(t);i&&e.on(t,i)})),this.isReady=!0}registerAdEventHandlers(){this.adsManager_&&(this.adsManager_.addEventListener(google.ima.AdEvent.Type.AD_PROGRESS,(e=>this.videoAdEventHandler.handleAdProgressEvent(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.CLICK,(e=>this.videoAdEventHandler.handleClickEvent(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.COMPLETE,(e=>this.videoAdEventHandler.handleCompleteEvent(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,(e=>this.videoAdEventHandler.handleQuartileEvent(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.LOG,(e=>this.videoAdEventHandler.handleLogEvent(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.MIDPOINT,(e=>this.videoAdEventHandler.handleQuartileEvent(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.PAUSED,(e=>this.videoAdEventHandler.handlePauseEvent(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.RESUMED,(e=>this.videoAdEventHandler.handlePlayEvent(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.SKIPPED,(e=>this.videoAdEventHandler.handleSkipEvent(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.STARTED,(e=>this.videoAdEventHandler.handleInitialTime(e)),!1),this.adsManager_.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,(e=>this.videoAdEventHandler.handleQuartileEvent(e)),!1))}removePrebidEventHandlers(){if(!this.adsManager_||!this.isPrebidRenderer)return;let e=this.adsManager_.adEventHandler;Object.entries(this.prebidBoundHandlers).forEach((t=>{let[i,a]=t;e.off(i,a)})),this.isReady=!1,this.prebidBoundHandlers={}}destroy(){this.isPrebidRenderer&&(this.removePrebidEventHandlers(),this.boundHandlers={}),this.videoAdEventHandler=null}}class Ae{constructor(e){this.vData=e}handleInitialPlay(){var e=this.videoData,t=e.uuid;if(!(this.videoData.play_cnt>0)){we("Initial play event triggered");var i=0|this.player.getVideoLength();this.generateQuartileData(e,i),this.videoPixels.addStart(t),this.startDate=Date.now(),this.lastPosition=this.player.getCurrentVideoTime(),this.lastPositionSincePlayTimeRecorded=this.lastPosition}}handleLoadStart(){this.clearBufferingData()}handlePlayEvent(){we("Play event triggered for player "+this.id+"."),this.videoData.play_cnt++;let e=this.player.player.player;if(e.muted()||0===e.volume()||(this.videoData.lastUnmuted=new Date),this.isSeeking){let e=this.player.getCurrentVideoTime()-this.initialSeekTime>0;this.isScrubbing?e?this.videoData.seek_forward_scrubbing++:this.videoData.seek_back_scrubbing++:e?this.videoData.seek_forward_click++:this.videoData.seek_back_click++,this.isSeeking=!1,this.isScrubbing=!1}}handlePlayingEvent(){we("Playing event for player "+this.id)}handlePauseEvent(){we("Pause event triggered for player "+this.id+"."),this.videoData.pause_cnt++,this.bufferStart=!1}handleSeekingEvent(e){this.lastPosition=this.player.getCurrentVideoTime(),this.lastPositionSincePlayTimeRecorded=this.lastPosition,we("Seek event triggered for player "+this.id+". new position is "+this.lastPosition),this.isSeeking?this.isScrubbing||(this.isScrubbing=!0):this.isSeeking=!0}handleSeekedEvent(e){this.lastPosition=this.player.getCurrentVideoTime(),this.lastPositionSincePlayTimeRecorded=this.lastPosition,we("Seeked event triggered for player "+this.id+". new position is "+this.lastPosition),this.videoData.seek_time+=this.player.getCurrentVideoTime()-this.initialSeekTime}handleWaitingEvent(e){we("Waiting event triggered for player "+this.id+"."),we("Waiting isBuffering"+this.isBuffering+" and isScrubbing "+this.isScrubbing),!1===this.isBuffering&&!1===this.isScrubbing&&(this.bufferStart=new Date,we("This is our buffer start"+this.bufferStart),this.bufferPosition=this.player.getCurrentVideoTime(),this.readyState=this.player.getReadyState())}handleCompleteEvent(){we("Complete event triggered for player "+this.id+".");var e=this.videoData;if(this.clearBufferingData(),!e.completed){var t=e.uuid;e.completed=!0,this.videoPixels.addCompleted(t),e.end&&e.end.played&&!e.end.added&&(e.end.added=!0,this.videoPixels.addViewed(t,"end",e.end.viewed),this.videoPixels.addHeard(t,"end",e.end.heard),this.videoPixels.fire())}}handleErrorEvent(e){we("Error event triggered for player "+this.id+"."),this.videoData.errored||(this.videoData.errored=!0,this.videoPixels.addErrored(this.videoData.uuid))}handleRemoveEvent(){we("Remove event triggered for player "+this.id+"."),this.videoData.removed||(this.videoData.removed=!0,this.videoPixels.addRemoved(this.videoData.uuid))}handleTimeEvent(e){if(!("start"in this.videoData))return;this.videoData.timeupdatecalls+=1;var t=this.player.getCurrentVideoTime(),i=this.player.getPlayerViewable(),a=!1|(this.player.getPlayerVolume()>=.02&&!this.player.getPlayerMute()),s=this.player.getVideoLength(),d=this.videoData;if(this.bufferStart&&t!==this.bufferPosition){we("Adding to lag time and bufferer count"),this.bufferEnd=new Date;const e=this.bufferEnd-this.bufferStart;this.bufferStart=!1,this.bufferPosition=!1,this.bufferCount++,1==this.bufferCount&&(we("Add data to initialBufferTime"),d.initialBufferingTime=+e),d.lagTime+=e}void 0===this.lastPosition&&(this.lastPosition=t,this.lastPositionSincePlayTimeRecorded=t);let r=t<this.lastPosition,n=this.lastPositionSincePlayTimeRecorded>this.lastPosition,o=t-this.lastPosition>1;(r||n||o)&&(we("somehow we failed to account for a seek event. compensating. "+r+" "+n+" "+o),this.lastPosition=t,this.lastPositionSincePlayTimeRecorded=t),d.total_play_time+=Math.floor(1e3*(this.lastPosition-this.lastPositionSincePlayTimeRecorded)),a&&d.timeupdatecalls>1&&(d.unmute=1,d.total_play_time_unmute+=Math.floor(1e3*(this.lastPosition-this.lastPositionSincePlayTimeRecorded)),we("total play time unmute is "+d.total_play_time_unmute+" call "+d.timeupdatecalls),void 0===d.video_unmute_start&&(d.video_unmute_start=c())),1<=t&&t<s/4?(we("Player "+this.id+" at start. Current position is "+t+"."),d.start.played=!0,d.start.viewed&=i,d.start.heard&=a):s/4<=t&&t<s/2?(we("Player "+this.id+" at first quartile. Current position is "+t+"."),d.firstQuartile.played=!0,d.firstQuartile.viewed&=i,d.firstQuartile.heard&=a):s/2<=t&&t<s/4*3?(we("Player "+this.id+" at middle. Current position is "+t+"."),d.middle.played=!0,d.middle.viewed&=i,d.middle.heard&=a):s/4*3<=t&&t<s-1?(we("Player "+this.id+" at third quartile. Current position is "+t+"."),d.thirdQuartile.played=!0,d.thirdQuartile.viewed&=i,d.thirdQuartile.heard&=a):s-1<=t&&(we("Player "+this.id+" at end. Current position is "+t+"."),d.end.played=!0,d.end.viewed&=i,d.end.heard&=a),!d.start.completed&&t>=1?(we("Player "+this.id+" played past start."),d.start.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()):!d.firstQuartile.completed&&t>=1+s/4?(we("Player "+this.id+" played past first quartile."),d.firstQuartile.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()):!d.middle.completed&&t>=1+s/2?(we("Player "+this.id+" played past middle."),d.middle.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()):!d.thirdQuartile.completed&&t>=1+s/4*3&&(we("Player "+this.id+" played past third quartile."),d.thirdQuartile.completed=!0,this.videoPixels.addQuartileData(),this.videoPixels.fire()),Math.abs(t-this.lastPosition)>1&&(this.initialSeekTime=this.lastPosition),this.lastPositionSincePlayTimeRecorded=this.lastPosition,this.lastPosition=t}handleAdStarted(){if(this.bufferStart){this.bufferEnd=new Date;const e=this.bufferEnd-this.bufferStart;this.bufferStart=!1,this.bufferPosition=!1,this.bufferCount++,1==this.bufferCount&&(we("Add data to initialBufferTime"),this.videoData.initialBufferingTime=+e),this.videoData.lagTime+=e}}handleFloatPlayerClosed(){this.videoData.floatPlayerClosed=1,this.startDate&&(this.videoData.floatCloseTime=Date.now()-this.startDate)}handleFloatBounce(){let e=Date.now()-this.startDate;this.startDate&&this.is_floating&&!this.videoData.floatPlayerClosed&&this.player.isCurrentlyFloating()&&e<15e3&&(we("Float bounce"),this.videoPixels.addFloatBounce(this.videoData.uuid))}handleResolutionChange(){let e=this.player.player.player;if(!e)return;let t=e.qualityLevels(),i=t[t.selectedIndex];if(!i)return;let a=i.width.toString()+"x"+i.height.toString();this.videoData.resolutionStart||(this.videoData.resolutionStart=a,this.videoData.resolutionMax=a,this.videoData.resolutionPrevWidth=i.width,this.videoData.resolutionMaxWidth=i.width),i.width!=this.videoData.resolutionPrevWidth&&(this.videoData.resolutionPrevWidth=i.width,this.videoData.resolutionLastSelected=a),i.width>this.videoData.resolutionMaxWidth&&(this.videoData.resolutionMaxWidth=i.width,this.videoData.resolutionMax=a)}handleClickThroughToHumixPageEvent(){this.videoData.click_to_dedicated_page=1}handleSharingEvent(e){if(!e.platform)return;let t=this.videoData;this.videoData[e.platform]="number"!==typeof t.sharingData[e.platform]?1:t.sharingData[e.platform]++}handleVolumeChangeEvent(e){let t=this.player.player.player,i=t.muted()||0===t.volume();if(0===t.currentTime())this.videoData.muted=!!i;else{let e=this.videoData.muted;!i&&e?(this.videoData.unmute=1,this.videoData.video_unmute_start=c(),this.videoData.muted=!1):i&&!e&&(this.videoData.muted=!0)}}handleLightsToggle(e,t){this.videoData.lightsOff||(this.videoData.lightsOff=0),this.videoData.lightsOn||(this.videoData.lightsOn=0),t?this.videoData.lightsOn++:this.videoData.lightsOff++}handleCaptionToggle(){this.player.player.player&&(document.getElementsByClassName("vjs-text-track-cue").length>0?this.videoData.IsCaptionOn=1:this.videoData.IsCaptionOn=0)}}function we(e){"2"===new URLSearchParams(window.location.search).get("ez_vid_debug")&&console.log("[Video Analytics] "+e)}class Pe{constructor(e){this.videoData=e}addCounts(){var e=this.videoData,t=e.uuid;if(e.play_cnt>0&&__ez.vep.Add(t,[new __ezDotData("play_cnt",e.play_cnt)]),e.pause_cnt>0&&__ez.vep.Add(t,[new __ezDotData("pause_cnt",e.pause_cnt)]),e.ad_cnt>0&&__ez.vep.Add(t,[new __ezDotData("ad_cnt",e.ad_cnt)]),e.seek_time>0){var i=0|e.seek_time;__ez.vep.Add(t,[new __ezDotData("seek_time",i)])}}addBufferData(){var e=this.videoData,t=e.uuid;e.total_play_time>0&&__ez.vep.Add(t,[new __ezDotData("total_play_time",e.total_play_time)]),e.initialBufferTime>0&&__ez.vep.Add(t,[new __ezDotData("init_buffer_time",e.initialBufferingTime)]),e.lagTime>0&&__ez.vep.Add(t,[new __ezDotData("lag_length",e.lagTime)])}addQuartileData(){var e=this.videoData;if("start"in e){var t=e.uuid;!e.start.added&&e.start.played&&e.start.completed&&(e.start.added=!0,this.addViewed(t,"start",e.start.viewed),this.addHeard(t,"start",e.start.heard)),!e.firstQuartile.added&&e.firstQuartile.played&&e.firstQuartile.completed&&(e.firstQuartile.added=!0,this.addViewed(t,"first_quartile",e.firstQuartile.viewed),this.addHeard(t,"first_quartile",e.firstQuartile.heard)),!e.middle.added&&e.middle.played&&e.middle.completed&&(e.middle.added=!0,this.addViewed(t,"middle",e.middle.viewed),this.addHeard(t,"middle",e.middle.heard)),!e.thirdQuartile.added&&e.thirdQuartile.played&&e.thirdQuartile.completed&&(e.thirdQuartile.added=!0,this.addViewed(t,"third_quartile",e.thirdQuartile.viewed),this.addHeard(t,"third_quartile",e.thirdQuartile.heard))}}addFloatPlayerClosed(){void 0!==this.videoData.floatPlayerClosed&&this.videoData.floatPlayerClosed>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("float_player_closed",this.videoData.floatPlayerClosed)]),this.videoData.floatCloseTime&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("float_close_time",this.videoData.floatCloseTime)])}addResolutionData(){void 0!==this.videoData.resolutionStart&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("resolution_start",this.videoData.resolutionStart)]),void 0!==this.videoData.resolutionMax&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("resolution_max",this.videoData.resolutionMax)]),void 0!==this.videoData.resolutionLastSelected&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("resolution_last_selected",this.videoData.resolutionLastSelected)])}addTitleClickData(){void 0!==this.videoData.click_to_dedicated_page&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("click_to_dedicated_page",this.videoData.click_to_dedicated_page)])}addMuteData(){void 0!==this.videoData.unmute&&(__ez.vep.Add(this.videoData.uuid,[new __ezDotData("unmute",this.videoData.unmute)]),__ez.vep.Add(this.videoData.uuid,[new __ezDotData("video_unmute_start",this.videoData.video_unmute_start)])),this.videoData.total_play_time_unmute>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("total_play_time_unmute",this.videoData.total_play_time_unmute)])}addStart(e){var t=c();__ez.vep.Add(e,[new __ezDotData("video_start",t)])}addCompleted(e){__ez.vep.Add(e,[new __ezDotData("completed",1)])}addErrored(e){__ez.vep.Add(e,[new __ezDotData("errored",1)])}addRemoved(e){__ez.vep.Add(e,[new __ezDotData("removed",1)])}addViewed(e,t,i){__ez.vep.Add(e,[new __ezDotData("viewed_"+t,i)])}addHeard(e,t,i){__ez.vep.Add(e,[new __ezDotData("heard_"+t,i)])}addClickedLink(e,t){let{href:i}=t;var a=this.videoData.uuid;__ez.vep.Add(a,[new __ezDotData("clicked_link_s",e)]),i&&__ez.vep.Add(a,[new __ezDotData("clicked_link_url",i)])}addSharingData(){let e=this.videoData,t=e.uuid,i={fbButton:"facebook_shares",pinterest:"pinterest_shares",tw:"twitter_shares",reddit:"reddit_shares",googleplus:"googleplus_shares",messenger:"messenger_shares",linkedin:"linkedin_shares",vk:"vk_shares",ok:"ok_shares",mail:"mail_shares",email:"email_shares",telegram:"telegram_shares",whatsapp:"whatsapp_shares",viber:"viber_shares"};Object.keys(e.sharingData).forEach((a=>{i.hasOwnProperty(a)&&e.sharingData[a]>0&&(i[a],e.sharingData[a],__ez.vep.Add(t,[new __ezDotData(i[a],e.sharingData[a])]))}))}addLightsData(){this.videoData.lightsOn&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("lights_on",this.videoData.lightsOn)]),this.videoData.lightsOff&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("lights_off",this.videoData.lightsOff)])}addFloatBounce(e){__ez.vep.Add(e,[new __ezDotData("float_bounce",1)])}fire(){__ez.vep.Fire()}addSeekData(){this.videoData.seek_back_click>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("seek_back_click",this.videoData.seek_back_click)]),this.videoData.seek_forward_click>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("seek_forward_click",this.videoData.seek_forward_click)]),this.videoData.seek_back_scrubbing>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("seek_back_scrubbing",this.videoData.seek_back_scrubbing)]),this.videoData.seek_forward_scrubbing>0&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("seek_forward_scrubbing",this.videoData.seek_forward_scrubbing)])}addPixel(e,t){__ez.vep.Add(this.videoData.uuid,[new __ezDotData(e,t)])}addCaptionOnOffData(){void 0!==this.videoData.IsCaptionOn&&__ez.vep.Add(this.videoData.uuid,[new __ezDotData("is_caption_on",this.videoData.IsCaptionOn)])}}class be{constructor(e,t){!0===t.Preview||(this.vidStorePath="/detroitchicago/vid.gif",this.vidErrorURL=(1==window._ez_send_requests_outside_humix||window.hasOwnProperty("ezIntType")&&"wp"===window.ezIntType||"undefined"!==typeof _ez_send_requests_through_ezoic&&!0===_ez_send_requests_through_ezoic||window._ez_sa?"https://g.ezoic.net":window.location.protocol+"//"+document.location.hostname)+"/detroitchicago/ved.gif",this.url=_ezaq.url,this.pageview_id=_ezaq.page_view_id,_ezaq.hasOwnProperty(["visit_uuid"])?this.visit_uuid=_ezaq.visit_uuid:this.visit_uuid=d("ezovuuid_"+_ezaq.domain_id),this.template_id=_ezaq.template_id,this.domain_id=_ezaq.domain_id,this.tech=e.getTech(),this.is_humix_app=window.is_humix_app?1:0,"undefined"!==typeof vectx&&(vectx.hasOwnProperty("video_container_impression_id")&&(this.video_container_impression_id=vectx.video_container_impression_id),vectx.hasOwnProperty("embed_is_floating")&&(this.embed_is_floating=vectx.embed_is_floating)),this.eventEmitter=e.getEventEmitter(),this.player=e,this.playerEvents=[],this.videoObject=t,this.setVideoData(t,!0))}trackInHumixVaGlobal(){window.__humix_va__||(window.__humix_va__={loaded:0,instances:[],lastTimestamp:null});const e=Date.now(),t={id:this.id||null,player:this.player||null,videoObject:this.videoObject||null,timestamp:e};window.__humix_va__.instances.length>=10&&window.__humix_va__.instances.shift(),window.__humix_va__.loaded++,window.__humix_va__.lastTimestamp=e,window.__humix_va__.instances.push(t)}setVideoData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.videoData;this.videoData=r(),this.videoData.impression_id=e.ImpressionId,this.videoData.ad_unit=e.AdUnit,"undefined"!==typeof this.player.player.player.ezErrorState&&(this.videoData.uuid,"undefined"===typeof this.player.player.player.errored&&(this.videoData.uuid,this.videoData.errored=!1)),this.owner_domain_id=void 0,this.extra_message=void 0,e&&e.PublisherVideoContentShare&&Object.keys(e.PublisherVideoContentShare).length>0&&n(e.PublisherVideoContentShare)&&(n(e.PublisherVideoContentShare)&&(this.owner_domain_id=e.PublisherVideoContentShare.DomainIdOwner),"undefined"!==typeof e.PublisherVideoContentShare.LoadError&&(this.extra_message=e.PublisherVideoContentShare.LoadError)),this.humix_channel_id=e.HumixChannelId,this.media_src=this.player.getMediaSource(),this.width=this.player.getVideoDimensions().width,this.height=this.player.getVideoDimensions().height,this.id=this.videoData.uuid,void 0!==this.player.player.player.title&&(this.video_title=this.player.player.player.title),void 0!==this.player.player.player.video_position_id&&(this.video_position_id=this.player.player.player.video_position_id),void 0!==this.player.player.player.is_autoplay&&(this.is_autoplay=this.player.player.player.is_autoplay?1:0),void 0!==this.player.player.player.is_floating&&(this.is_floating=this.player.player.player.is_floating?1:0),"undefined"!==typeof this.player.player.player.videos?(this.is_playlist_item=1,this.video_playlist_id=e.VideoPlaylistId,this.video_playlist_index=this.player.player.player.videos.findIndex((t=>t.VideoContentId===e.VideoContentId))):this.is_playlist_item=0,e.videoObjectsCount&&(this.video_objects_count=e.videoObjectsCount),e.videoObjectsIndex&&(this.video_objects_index=e.videoObjectsIndex),void 0!==this.player.player.player.video_length&&(this.video_length=this.player.player.player.video_length),void 0!==e.VideoSelection&&(this.video_selection_type=e.VideoSelection),e.VideoMatchScore&&(this.video_match_score=e.VideoMatchScore),e.VideoAutoMatchType&&(this.video_auto_match_type=e.VideoAutoMatchType),e.VideoUploadSource&&e.VideoUploadSource.length>0?this.video_source=e.VideoUploadSource:this.video_source="upload",this.videoData.total_play_time_unmute=0,e.CollectionId&&e.ScoreGroupId&&(this.collection_id=e.CollectionId,this.score_group_id=e.ScoreGroupId),e.VideoRankingConfigId&&(this.video_ranking_config_id=e.VideoRankingConfigId),e.PreferredVideoType&&(this.preferred_video_type=e.PreferredVideoType),void 0!==e.AutoInsertImpressionID&&""!=e.AutoInsertImpressionID&&(this.video_auto_insert_impression_id=e.AutoInsertImpressionID),void 0!==e.embed_ctx&&(void 0!==e.embed_ctx.parent_url&&(this.url=e.embed_ctx.parent_url),void 0!==e.embed_ctx.domain_id&&(this.domain_id=e.embed_ctx.domain_id,this.pageview_id=e.embed_ctx.pageview_id,this.visit_uuid=e.embed_ctx.visit_uuid)),this.is_vertical=e.IsVertical||e.IsRotate?1:0,this._ezva=[],this.storeData(),this.generateBufferData(this.videoData),this.is_floating?this.videoData.floatPlayerClosed=i?i.floatPlayerClosed:0:this.videoData.floatPlayerClosed=void 0,this.generateSharingData(this.videoData),this.bufferStart=!1,this.bufferEnd=!1,this.bufferCount=0,this.readyState=!1,this.timer=null,this.isSeeking=!1,this.isScrubbing=!1,this.isBuffering=!1,this.initialSeekTime=0,this.videoPixels=new Pe(this.videoData),this.videoEvents=new Ae,t&&this.attachListeners(),this.reattachListeners(),this.trackInHumixVaGlobal()}attachListeners(){"HTML5"===this.tech?this.attachHTML5Listeners():"YOUTUBE"===this.tech?this.attachYoutubeListeners():"VIMEO"===this.tech&&this.attachVimeoListeners(),ez_attachEvent(document,"blur",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"beforeunload",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"blur",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"pagehide",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"unload",this.bind_(this,this.unloadAll)),ez_attachEvent(window,"beforeunload",this.bind_(this,this.videoEvents.handleFloatBounce)),this.attachSharingListeners()}attachHTML5Listeners(){this.playerEvents=[{name:"play",fn:this.bind_(this,this.videoEvents.handleInitialPlay)},{name:"play",fn:this.bind_(this,this.videoEvents.handlePlayEvent)},{name:"pause",fn:this.bind_(this,this.videoEvents.handlePauseEvent)},{name:"seeking",fn:this.bind_(this,this.videoEvents.handleSeekingEvent)},{name:"seeked",fn:this.bind_(this,this.videoEvents.handleSeekedEvent)},{name:"ended",fn:this.bind_(this,this.videoEvents.handleCompleteEvent)},{name:"error",fn:this.bind_(this,this.videoEvents.handleErrorEvent)},{name:"remove",fn:this.bind_(this,this.videoEvents.handleRemoveEvent)},{name:"timeupdate",fn:this.bind_(this,this.videoEvents.handleTimeEvent)},{name:"waiting",fn:this.bind_(this,this.videoEvents.handleWaitingEvent)},{name:"playing",fn:this.bind_(this,this.videoEvents.handlePlayingEvent)},{name:"ads-ad-started",fn:this.bind_(this,this.videoEvents.handleAdStarted)},{name:"floatPlayerClosed",fn:this.bind_(this,this.videoEvents.handleFloatPlayerClosed)},{name:"resolutionChange",fn:this.bind_(this,this.videoEvents.handleResolutionChange)},{name:"clickThroughToHumixPage",fn:this.bind_(this,this.videoEvents.handleClickThroughToHumixPageEvent)},{name:"volumechange",fn:this.bind_(this,this.videoEvents.handleVolumeChangeEvent)},{name:"captionToggle",fn:this.bind_(this,this.videoEvents.handleCaptionToggle)}],this.playerEvents.forEach((e=>{this.eventEmitter.on(e.name,e.fn)}))}attachYoutubeListeners(){}attachVimeoListeners(){}reattachListeners(){"HTML5"===this.tech?(this.detachHTML5Listeners(),this.attachHTML5Listeners()):"YOUTUBE"===this.tech?(this.detachYoutubeListeners(),this.attachYoutubeListeners()):"VIMEO"===this.tech&&(this.detachVimeoListeners(),this.attachVimeoListeners())}detachHTML5Listeners(){this.playerEvents.forEach((e=>{this.eventEmitter.off(e.name,e.fn)}))}detachYoutubeListeners(){}detachVimeoListeners(){}attachSharingListeners(){this.player&&this.player.on(null,"sharing:social:clicked",this.bind_(this,this.videoEvents.handleSharingEvent))}unloadAll(){this.videoPixels.addCounts(),this.videoPixels.addQuartileData(),this.videoPixels.addBufferData(),this.videoPixels.addFloatPlayerClosed(),this.videoPixels.addResolutionData(),this.videoPixels.addTitleClickData(),this.videoPixels.addSharingData(),this.videoPixels.addLightsData(),this.videoPixels.addMuteData(),this.videoPixels.addSeekData(),this.videoPixels.addCaptionOnOffData(),this.videoPixels.addPixel("timeupdatecalls",this.videoData.timeupdatecalls),this.videoPixels.fire()}handleClickLink(e,t){this.videoPixels.addClickedLink(e,t),this.videoPixels.fire()}clearBufferingData(){this.timer&&clearTimeout(this.timer),this.isScrubbing=!1,this.bufferPosition=!1,this.bufferStart=!1,this.bufferEnd=!1,this.readyState=!1}storeData(){if(("undefined"===typeof __ezInstream||!0!==__ezInstream.genericInstream)&&(this._ezva.push(this.getInitVideoData()),this._ezva.length>0)){JSON.stringify(this._ezva);var e=__ez.dot.getURL(this.vidStorePath);__ez.dot.Fire(e,this._ezva)}}generateBufferData(e){e.initialBufferingTime=0,e.initialSeekTime=0,e.lagTime=0,e.averageBitRate=0}generateSharingData(e){e.sharingData={fbButton:0,tw:0,reddit:0,linkedin:0,vk:0,email:0,telegram:0,whatsapp:0,pinterest:0}}generateQuartileData(e,t){e.start={},e.start.viewed=!0,e.start.heard=!0,e.start.played=!1,e.start.completed=!1,e.start.added=!1,e.firstQuartile={},e.firstQuartile.time=t/4|0,e.firstQuartile.viewed=!0,e.firstQuartile.heard=!0,e.firstQuartile.played=!1,e.firstQuartile.completed=!1,e.firstQuartile.added=!1,e.middle={},e.middle.time=t/2|0,e.middle.viewed=!0,e.middle.heard=!0,e.middle.played=!1,e.middle.completed=!1,e.middle.added=!1,e.thirdQuartile={},e.thirdQuartile.time=3*t/4|0,e.thirdQuartile.viewed=!0,e.thirdQuartile.heard=!0,e.thirdQuartile.played=!1,e.thirdQuartile.completed=!1,e.thirdQuartile.added=!1,e.end={},e.end.viewed=!0,e.end.heard=!0,e.end.played=!1,e.end.added=!1}getInitVideoData(){var e={};e.domain_id=this.domain_id,void 0!==this.owner_domain_id&&(e.owner_domain_id=this.owner_domain_id),e.humix_channel_id=this.humix_channel_id,e.url=this.url,e.pageview_id=this.pageview_id,e.visit_uuid=this.visit_uuid,e.template_id=this.template_id,e.video_impression_id=this.videoData.uuid,e.media_src=this.media_src,e.player_type=this.player.getPlayerType(),e.video_title=this.video_title,e.video_position_id=this.video_position_id,e.is_autoplay=this.is_autoplay,e.is_floating=this.is_floating,e.is_playlist_item=this.is_playlist_item,e.ab_test_id=_ezaq.ab_test_id,e.vab_test_id=_ezaq.ab_test_id,"undefined"!==typeof this.videoObject&&(e.is_preferred=this.videoObject.IsPreferred),this.is_playlist_item&&(e.video_playlist_id=this.video_playlist_id,e.video_playlist_index=this.video_playlist_index),e.video_length=this.video_length,void 0!==this.player.player.player.ezVideoId&&(e.content_id=this.player.player.player.ezVideoId),this.player.player.player.ezVideoImpressionId=e.video_impression_id,this.player.player.player.ezVideoImpressionId,e.width=this.width,e.height=this.height;var t=this.player.getPlayerPosition();e.pos_x=Math.round(t.x),e.pos_y=Math.round(t.y),this.video_objects_count&&(e.video_objects_count=this.video_objects_count),this.video_objects_index&&(e.video_objects_index=this.video_objects_index),this.extra_message&&(e.extra_message=this.extra_message),void 0!==this.video_selection_type&&(e.video_selection_type=this.video_selection_type),void 0!==this.video_match_score&&(e.video_match_score=this.video_match_score),void 0!==this.video_auto_match_type&&(e.video_auto_match_type=this.video_auto_match_type),e.is_blocker_on=function(){try{google.ima}catch(e){return!1}return!!__ez.vhb}()?0:1,void 0!==this.video_source&&(e.video_source=this.video_source),void 0!==this.video_container_impression_id&&(e.video_container_impression_id=this.video_container_impression_id),void 0!==this.embed_is_floating&&(e.embed_is_floating=this.embed_is_floating),void 0!==this.score_group_id&&void 0!==this.collection_id&&(e.score_group_id=this.score_group_id,e.collection_id=this.collection_id),void 0!==this.video_ranking_config_id&&(e.video_ranking_config_id=this.video_ranking_config_id),void 0!==this.video_auto_insert_impression_id&&(e.video_auto_insert_impression_id=this.video_auto_insert_impression_id),e.is_humix_app=this.is_humix_app,e.preferred_video_type=this.preferred_video_type;var i=t.x/window._hmx.topWindowBridge.getTopWindowInnerWidth();i&&!isNaN(i)&&i>0&&(e.pos_x_ratio=i);var a=t.y/window._hmx.topWindowBridge.getTopWindowInnerHeight();return a&&!isNaN(a)&&a>0&&(e.pos_y_ratio=a),e.insert_method=this.player.getInsertMethod(),e.is_vertical=this.is_vertical,window.ezoIframeStartTime&&(e.iframe_fire_delay_millis=Math.round(performance.now()-window.ezoIframeStartTime)),window.ezVideoIframe&&window._hmx&&window._hmx.topWindowBridge&&window._hmx.topWindowBridge.getElapsedTimeSinceIframeWasCreated&&window._hmx.topWindowBridge.getElapsedTimeSinceIframeWasCreated()&&!isNaN(window._hmx.topWindowBridge.getElapsedTimeSinceIframeWasCreated())&&(e.iframe_created_delay_millis=Math.round(window._hmx.topWindowBridge.getElapsedTimeSinceIframeWasCreated())),e}getVideoImpressionUUID(){return this.videoData&&this.videoData.uuid?this.videoData.uuid:""}bind_(e,t){return function(){t.apply(e,arguments)}}}class De{constructor(){"undefined"!==typeof afterglow.players&&(this.player=afterglow.getPlayer(afterglow.players[0].id)),this.playerId=afterglow.players[0].id}on(e,t,i){afterglow.on(this.playerId,t,i)}off(e,t,i){afterglow.off(this.playerId,t,i)}onTimeUpdate(e){}offTimeUpdate(e){}isFullscreen(){return!1}requestFullscreen(){}exitFullscreen(){}getVideoElement(){return afterglow.getPlayer(this.playerId).el_}getEventEmitter(){return afterglow.getPlayer(this.playerId)}getTech(){return this.player.techName_.toUpperCase()}getPlayer(){return afterglow.getPlayer(this.playerId)}getMediaSource(){return this.player.src()}isMobilePlatform(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}preloadContent(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}removePreloadListener(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}getVideoLength(){return this.player.duration()}isPlayerAutoplay(){return this.player.autoplay()}getVideoContainer(){return this.player.el_}getPlayerPosition(){var e={x:-1,y:-1},t=this.getVideoContainer();if("undefined"!==typeof t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}getVideoDimensions(){var e={width:-1,height:-1},t=this.getVideoContainer();return e.width=t.width,e.height=t.height,e}getPlayerVolume(){return this.player.volume()}setPlayerVolume(e){}getPlayerViewable(){return!1}getCurrentTime(){return this.player.currentTime()}getPlayerMute(){return this.player.muted()}play(){this.player.play()}pause(){this.player.pause()}paused(){}}class Ee{constructor(){"undefined"!==typeof flowplayer.Players&&(this.player=flowplayer.Players.instances[0])}on(e,t,i){this.player.on(t,i)}off(e,t,i){this.player.off(t,i)}onTimeUpdate(e){}offTimeUpdate(e){}isFullscreen(){return!1}requestFullscreen(){}exitFullscreen(){}getVideoElement(){return this.player}getEventEmitter(){return this.getVideoElement()}getTech(){return"HTML5"}getPlayer(){return this.player}getMediaSource(){return this.player.currentSrc}isMobilePlatform(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}preloadContent(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}removePreloadListener(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}getVideoLength(){return this.player.duration}isPlayerAutoplay(){return!1}getVideoContainer(){return this.player}getPlayerPosition(){var e={x:-1,y:-1},t=this.getVideoContainer();if("undefined"!==typeof t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}getVideoDimensions(){var e={width:-1,height:-1};return videoContainer=this.getVideoContainer(),e.width=videoContainer.width,e.height=videoContainer.height,e}getPlayerVolume(){return this.player.volume}setPlayerVolume(e){}getPlayerViewable(){return this.player.in_viewport}getPlayerMute(){return this.player.muted}play(){this.player.play()}pause(){this.player.pause()}paused(){}}class ke{constructor(e){this.player=jwplayer(e)}on(e,t,i){this.player.on(t,i)}off(e,t,i){this.player.off(t,i)}onTimeUpdate(e){}offTimeUpdate(e){}isFullscreen(){return!1}requestFullscreen(){}exitFullscreen(){}getVideoElement(){return this.player}getEventEmitter(){return this.getVideoElement()}getTech(){return this.player.getProvider()}getPlayer(){return this.player}getMediaSource(){return this.player.Playlist.file}isMobilePlatform(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}preloadContent(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}removePreloadListener(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}getVideoLength(){return this.player.getDuration()}isPlayerAutoplay(){return!1}getVideoContainer(){return this.player}getPlayerPosition(){var e={x:-1,y:-1},t=this.getVideoContainer();if("undefined"!==typeof t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}getVideoDimensions(){var e={width:-1,height:-1};return videoContainer=this.getVideoContainer(),e.width=videoContainer.width,e.height=videoContainer.height,e}getPlayerVolume(){return this.player.getVolume()}setPlayerVolume(e){}getPlayerViewable(){return this.player.getViewable()}getPlayerMute(){return this.player.getMute()}play(){this.player.play()}pause(){this.player.pause()}paused(){}}class ze{constructor(e){if(this.player={},"undefined"!==typeof e)this.player=e;else{var t=videojs.getAllPlayers();t.length>0&&(this.player=t[0])}}on(e,t,i){this.player.on(t,i)}off(e,t,i){this.player.off(t,i)}once(e,t,i){this.player.one(t,i)}ended(){return this.player.ended()}trigger(e){this.player.trigger(e)}onTimeUpdate(e){this.on(null,"timeupdate",e)}offTimeUpdate(e){this.off(null,"timeupdate",e)}isFullscreen(){return this.player.isFullscreen()}requestFullscreen(){this.player.requestFullscreen()}exitFullscreen(){this.player.exitFullscreen()}getReadyState(){return this.player.readyState()}getVideoElement(){return this.player.tech({IWillNotUseThisInPlugins:!0}).el()}getEventEmitter(){return this.player}getTech(){return"HTML5"}getPlayer(){return this.player}getMediaSource(){return this.player.currentSrc()}isMobilePlatform(){return this.player.paused()&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}preloadContent(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.addEventListener("loadedmetadata",e,!1),this.player.load()):e()}removePreloadListener(){this.preloadListener_&&(this.player.removeEventListener("loadedmetadata",this.preloadListener_,!1),this.preloadListener_=null)}getVideoLength(){return this.player.duration()}isPlayerAutoplay(){return this.player.is_autoplay?this.player.is_autoplay:this.player.autoplay()}getVideoContainer(){return this.player.el()}getPlayerPosition(){var e={x:-1,y:-1},t=this.getVideoContainer();if("undefined"!==typeof t){var i=getElementPosition(t);e.x=i.x,e.y=i.y}return e}getVideoDimensions(){var e={width:-1,height:-1},t=this.getVideoContainer();return e.width=t.clientWidth,e.height=t.clientHeight,e}getPlayerVolume(){return this.player.volume()}setPlayerVolume(e){this.player.volume(e),0==e?this.player.muted(!0):this.player.muted(!1)}getPlayerViewable(){return!1}getPlayerMute(){return this.player.muted()}getCurrentTime(){return this.player.currentTime()}play(){this.player.play()}pause(){this.player.pause()}paused(){return this.player.paused()}}class Ce{constructor(e,t){this.playerDef=e,this.playerObject=t}getPlayer(){return"afterglow"===this.playerDef?new De:"flowplayer"===this.playerDef?new Ee:"jwplayer"===this.playerDef?new ke(0):"videojs"===this.playerDef||"ezvideojs"===this.playerDef?new ze(this.playerObject):void 0}}class Be{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;s(this,"analytics",null),s(this,"adAnalytics",null),s(this,"videoContentShare",null),s(this,"adInitializer",null),s(this,"adRenderer",null);let a=new Ce(e,i);this.playerDef=e,this.player=a.getPlayer(),this.videoPlayerContainer_=this.getVideoContainer(),this.dimensions=this.player.getVideoDimensions(),this.preloadListener_=null,this.PlayPromise=null,this.currentTime=0,this.width=this.dimensions.width,this.height=this.dimensions.height,this.videoObject=t,this.userPaused_=!1;let d=this;i.playVideoOrAd=function(){this.isAdInProgress()&&this.isAdPaused()?d.adRenderer.resumeAd():this.isAdInProgress()||this.play()},i.pauseVideoOrAd=function(){this.isAdInProgress()&&!this.isAdPaused()?d.adRenderer.pauseAd():this.isAdInProgress()||this.pause()},i.isAdInProgress=()=>!!d.adRenderer?.isAdInProgress(),i.isAdPaused=()=>d.adRenderer&&!d.adRenderer.isAdPlaying(),i.isVideoOrAdPaused=()=>d.isVideoOrAdPaused(),i.isCurrentlyFloating=()=>d.isCurrentlyFloating(),i.isPausedByUser=()=>d.isVideoOrAdPaused()&&d.userPaused_,i.getPlayerViewable=()=>d.getPlayerViewable(),i.showFloatingPlayer=()=>d.player.trigger(b),i.hideFloatingPlayer=()=>d.player.trigger(D),i.getCurrentVideoTime=()=>d.getCurrentVideoTime();const r=e=>{e.target.closest(".ez-vad-play-pause, .vjs-play-control, .vjs-big-play-button, video")&&(this.userPaused_=this.isVideoOrAdPaused())};this.player.getVideoContainer().addEventListener("click",r),this.player.getVideoElement().addEventListener("click",r),this.on(null,"play",(()=>this.userPaused_=!1))}isVideoOrAdPaused(){return this.player.getPlayer().isAdInProgress()?this.player.getPlayer().isAdPaused():this.player.paused()}bind_(e,t){return function(){t.apply(e,arguments)}}on(e,t,i){this.player.on(e,t,i)}once(e,t,i){this.player.once(e,t,i)}off(e,t,i){this.player.off(e,t,i)}onTimeUpdate(e){this.player.onTimeUpdate(e)}offTimeUpdate(e){this.player.offTimeUpdate(e)}isFullscreen(){return this.player.isFullscreen()}requestFullscreen(){this.player.requestFullscreen()}exitFullscreen(){this.player.exitFullscreen()}toggleFullscreen(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()}getReadyState(){return this.player.getReadyState()}getVideoElement(){return this.player.getVideoElement()}getEventEmitter(){return this.player.getEventEmitter()}getTech(){return this.player.getTech()}getMediaSource(){return this.player.getMediaSource()}isMobilePlatform(){return this.player.paused&&(navigator.userAgent.match(/(iPod|iPhone|iPad)/)||navigator.userAgent.toLowerCase().indexOf("android")>-1)}getCurrentVideoTime(){return this.currentTime=this.player.getCurrentTime(),this.currentTime}handleAdPause(e){}preloadContent(e){this.isMobilePlatform()?(this.preloadListener_=e,this.player.on(null,"loadedmetadata",e),this.on(null,"adpause",this.bind_(this,this.handleAdPause))):e()}removePreloadListener(){this.preloadListener_&&(this.player.off(null,"loadedmetadata",this.preloadListener_),this.preloadListener_=null)}getPlayerType(){return 0==this.videoObject.MagicPlaceholderType?"default":"universal"}getVideoLength(){return this.player.getVideoLength()}isPlayerAutoplay(){return this.player.isPlayerAutoplay()}isCurrentlyFloating(){return!!this.getVideoContainer()?.closest(".ez-video-container.ez-floating")}isEmbedCurrentlyFloating(){return!("undefined"===typeof vectx||!vectx.hasOwnProperty("player_currently_floating"))&&vectx.player_currently_floating}getVideoContainer(){return this.player.getVideoContainer()}getAdContainer(){let e=document.getElementById(this.adInitializer.videoAdContainerId);return e||(e=document.createElement("div")),e}getPlayerPosition(){var e={x:-1,y:-1},t=this.videoPlayerContainer_;if("undefined"!==typeof t){var i=this.getElementPosition(t);e.x=i.x,e.y=i.y}return e}getElementPosition(e){return window._hmx.topWindowBridge.getElementPosition(e)}getVideoDimensions(){return this.player.getVideoDimensions()}resize(e,t,i,a,s){this.videoPlayerContainer_.style.position=e,this.videoPlayerContainer_.style.top=t+"px",this.videoPlayerContainer_.style.left=i+"px",this.videoPlayerContainer_.style.width=a+"px",this.videoPlayerContainer_.style.height=s+"px",this.player.style.width=a+"px",this.player.style.height=s+"px"}registerVideoEndedCallback(e){this.player.on("my-video","ended",e)}removeVideoEndedCallback(e){this.player.off("my-video","ended",e)}getPlayerVolume(){return this.getPlayerMute()?0:this.player.getPlayerVolume()}setPlayerVolume(e){return this.player.setPlayerVolume(e)}getPlayerViewable(){return function(e,t){let i=window._hmx.topWindowBridge.getBoundingClientRectInTopWindow(e),a=window._hmx.topWindowBridge.getTopWindowInnerHeight();return!(Math.floor(100-(i.top>=0?0:i.top)/+-i.height*100)<t||Math.floor(100-(i.bottom-a)/i.height*100)<t)}(this.player.getVideoElement(),50)}getPlayerMute(){return this.player.getPlayerMute()}play(){return this.PlayPromise=this.player.play(),this.PlayPromise}pause(){this.player.pause()}paused(){return this.player.paused()}ended(){return this.player.ended()}trigger(e){this.player.trigger(e)}getNextAdBreak(e){if(!e.length)return;const t=e[0];if(t.isAdBreakFrontloaded())return this.getNextAdBreakInOrder(e);if(t.isAdBreakCustomPosition())return this.getNextAdBreakInOrder(e);let i,a,s,d=Math.floor(this.getCurrentVideoTime()),r=-1;for(let n=0;n<e.length;n++){if(e[n].isTriggered||e[n].IsSkipped||e[n].isComplete)continue;let t=this.getAdBreakTime(e[n]);r<t&&(r=t,a=e[n],s=n),t<=d&&!1===e[n].isComplete&&!1===this.getIsBreakCompleted(e[n])&&(s=n,i=e[n])}return i||(i=a),{nextBreak:i,idx:s}}getNextAdBreakInOrder(e){if(0===e.length)return;let t,i,a=1/0;for(let s=0;s<e.length;s++){if(!0===e[s].isTriggered||!0===e[s].IsSkipped)continue;let d=this.getAdBreakTime(e[s]);e[s]&&!1===e[s].isComplete&&!1===this.getIsBreakCompleted(e[s])&&d<a&&(a=d,t=e[s],i=s)}return t?{nextBreak:t,idx:i}:void 0}getAdBreakTime(e){let t=e.timeOffsetSeconds;return-1==t&&(t=Math.floor(this.getVideoLength())),t}attachAnalytics(e){return this.analytics=new be(this,e),this.analytics}attachAdAnalytics(e,t,i,a){return this.adAnalytics=new fe(this,e,t,i,this.videoContentShare,a),this.adAnalytics}attachAdRendering(){let{adUnit:e,adBreaks:t,adInitializer:i,isPlayList:a,videoObject:s,browserPermissions:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.adInitializer=i,this.adRenderer=new ge(this,e,t,i,a,s,d),this.adRenderer}attachPrebidAdRendering(){let{adUnit:e,adBreaks:t,adInitializer:i,videoObject:a,browserPermissions:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.adInitializer=i,"undefined"!==window.ezVadPb&&window.ezVadPb.PrebidVideoAdManager&&(this.adRenderer=new window.ezVadPb.PrebidVideoAdManager(this,e,t,a,s,i)),this.adRenderer}getInsertMethod(){return this.videoObject.InsertMethod}getIsBreakCompleted(e){return!!(__ez&&__ez.vhb&&__ez.vhb.breaks&&e&&e.key)&&(e.isFloating?!0===__ez.vhb?.floatingBreaks[e.key]?.isComplete:!0===__ez.vhb.breaks[e.key]?.isComplete)}}let xe=!1;function Se(e,t){return new Be(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0)}function Ie(e,t,i,a){return new v(e,t,i,a)}function Te(e,t,i,a){if("undefined"!==window.ezVadPb&&window.ezVadPb.PrebidVideoAdStrategy)return new window.ezVadPb.PrebidVideoAdStrategy(e,t,a)}"undefined"!==typeof ezVideoIframe&&ezVideoIframe&&(xe=!0),"undefined"!==typeof isSharedEmbed&&isSharedEmbed&&(xe=!1,"undefined"!==typeof vectx&&(vectx.hasOwnProperty("parent_url")&&(_ezaq.player_url=_ezaq.url,_ezaq.url=vectx.parent_url),vectx.hasOwnProperty("domain_id")&&(window._ez_send_requests_outside_humix=!0,_ezaq.domain_id=vectx.domain_id,_ezaq.page_view_id=vectx.pageview_id,_ezaq.visit_uuid=vectx.visit_uuid))),__ez=xe?window.parent.__ez:__ez,_ezaq=xe?window.parent._ezaq:_ezaq,ez_attachEvent=xe?window.parent.ez_attachEvent:ez_attachEvent,ez_detachEvent=xe?window.parent.ez_detachEvent:ez_detachEvent,__ezDotData=xe?window.parent.__ezDotData:__ezDotData,ezVideoAnalytics=t})();